1
00:00:11,849 --> 00:00:15,740
alright good afternoon everyone thank
you for

2
00:00:15,074 --> 00:00:18,116
coming here to adopting hand of fun i OS
in OS 10

3
00:00:19,016 --> 00:00:23,032
I michael jordan's I'm the lead
engineering project manager for

4
00:00:23,032 --> 00:00:27,057
continuity and I'm super excited to be
here today to talk to you about

5
00:00:27,057 --> 00:00:31,073
adopting handoff in your applications I
love it later I'm evil

6
00:00:31,073 --> 00:00:34,332
joined by been speeding he staten field
to

7
00:00:34,989 --> 00:00:40,078
to talk more in this session but as you
saw on Monday hand up is a huge part

8
00:00:40,879 --> 00:00:43,890
have the releases for book for IOUs and
OS and

9
00:00:43,089 --> 00:00:46,398
and I'm really happy to be the second
person at least

10
00:00:47,199 --> 00:00:51,227
this week will talk to you more about
them so if you look at this feature

11
00:00:51,479 --> 00:00:54,486
you can really see the big goal is that
we wanted to be

12
00:00:54,549 --> 00:01:00,100
EV free for the user for love you to
take what they're doing in move that

13
00:01:00,001 --> 00:01:03,099
between whatever Apple device they
happen to be using so

14
00:01:04,008 --> 00:01:08,477
all continuity handoff in particular is
all about having that seamless

15
00:01:08,549 --> 00:01:09,570
experience

16
00:01:09,057 --> 00:01:14,057
between naps on different devices sit
out today

17
00:01:14,057 --> 00:01:16,143
we'll take a look at what we're actually
gonna learn this session today so first

18
00:01:17,043 --> 00:01:17,106
of all

19
00:01:18,006 --> 00:01:21,092
will take a quick look at at what is
hand-off how does this feature working

20
00:01:21,092 --> 00:01:22,711
cell with the about that

21
00:01:23,539 --> 00:01:26,548
on Monday and so will dive into that a
bit more next we'll take a look at

22
00:01:27,439 --> 00:01:27,506
actually

23
00:01:28,109 --> 00:01:33,810
adopting handoff in your application so
at a super simple EP I am very happy to

24
00:01:33,081 --> 00:01:34,170
be able to tell you that

25
00:01:34,899 --> 00:01:38,990
their different integration points in
both ap kidding you like it for being

26
00:01:38,099 --> 00:01:39,132
able to take advantage of this

27
00:01:40,032 --> 00:01:43,831
in your app and so we'll take a look at
those and little round things out by

28
00:01:44,119 --> 00:01:46,140
actually taking an in-depth look at some

29
00:01:46,329 --> 00:01:49,335
had some pretty advanced things you can
do with hand of that are super cool

30
00:01:49,929 --> 00:01:53,420
alright so what is hand-off

31
00:01:53,042 --> 00:01:58,081
well I think we've all been stuck here
before rate you're using one of your

32
00:01:58,081 --> 00:02:00,560
devices maybe you're browsing on a Web
site

33
00:02:01,289 --> 00:02:05,335
and what you really want to be able to
do is to take what you're doing on that

34
00:02:05,749 --> 00:02:06,520
device

35
00:02:06,052 --> 00:02:10,066
and move over to another one and a lot
of times that can be kind of cumbersome

36
00:02:10,066 --> 00:02:10,151
maybe

37
00:02:11,051 --> 00:02:14,137
you have to go and fish out the app on
your iPad you have to go back to where

38
00:02:15,037 --> 00:02:16,061
you were in that app

39
00:02:16,061 --> 00:02:20,153
reload Ubuntu stayed maybe didn't even
have you Data Sync across in the first

40
00:02:21,053 --> 00:02:22,137
place into it even more pain

41
00:02:23,037 --> 00:02:28,055
and so hand of its all about making it
super simple to make that jump between

42
00:02:28,055 --> 00:02:29,071
your devices

43
00:02:29,071 --> 00:02:32,164
so is your on your Mac in your browsing
something like like Safari

44
00:02:33,064 --> 00:02:37,148
on the lower left corner loves your iPad
or any the rest of your devices

45
00:02:38,048 --> 00:02:42,110
you'll see icon shows up you can swipe
that icon up

46
00:02:43,001 --> 00:02:46,059
and we immediately bring you back to
exactly what you were doing

47
00:02:46,068 --> 00:02:49,111
in that application wonderful seamless
experience

48
00:02:50,011 --> 00:02:53,023
and so I how we actually

49
00:02:53,023 --> 00:02:57,023
do all this what's going on so the first
thing to know is that

50
00:02:57,023 --> 00:03:02,066
this is entirely about the proximity
have your devices to your other devices

51
00:03:02,066 --> 00:03:05,077
so we use BT elite actually

52
00:03:05,077 --> 00:03:09,155
it actually let devices around you know
what they should show in that lower left

53
00:03:10,055 --> 00:03:10,107
corner

54
00:03:11,007 --> 00:03:15,016
and which devices actually show your abs
is linked to

55
00:03:15,097 --> 00:03:18,174
the devices that you're signed into with
the same I cloud account

56
00:03:19,074 --> 00:03:22,128
so we do is you we know that you're
signed into this device

57
00:03:23,028 --> 00:03:28,073
and we actually use the cloud to I BT
leap here you different devices to each

58
00:03:28,073 --> 00:03:28,119
other

59
00:03:29,019 --> 00:03:34,021
and when you actually go to I had to
actually continue an activity on another

60
00:03:34,039 --> 00:03:34,122
device

61
00:03:35,022 --> 00:03:38,046
were actually moving that data directly
from

62
00:03:38,046 --> 00:03:42,046
where you were to where you want to go
so it so it's a

63
00:03:42,046 --> 00:03:45,104
saw about directly moving information
about that activity itself

64
00:03:46,004 --> 00:03:49,017
now where you actually gonna find

65
00:03:49,017 --> 00:03:52,109
the UI for for handoff for those two
places on both platforms

66
00:03:53,009 --> 00:03:56,030
first which you'll find is that

67
00:03:56,003 --> 00:04:00,010
on i OS in the lower left corner the
lock screen if you're using

68
00:04:00,037 --> 00:04:03,121
your Mac another OS device you'll see
this icon show up

69
00:04:04,021 --> 00:04:07,105
and this is your clue that you can swipe
this up to get right back to that

70
00:04:08,005 --> 00:04:08,090
application

71
00:04:08,009 --> 00:04:12,028
you also find that if you double tap the
home button

72
00:04:13,009 --> 00:04:17,053
and bring up the multitasking switcher
you can go all the way the other side

73
00:04:17,053 --> 00:04:20,140
above the home screen and you'll see a
pain for an app that we see that we know

74
00:04:21,004 --> 00:04:21,089
is nearby

75
00:04:22,025 --> 00:04:25,724
you can resume from there as well so to
different places

76
00:04:25,949 --> 00:04:29,800
super convenient to get to those now on
the Mac

77
00:04:29,008 --> 00:04:32,093
you've actually got you why that's going
to stick around for you here in the dock

78
00:04:33,065 --> 00:04:35,069
if you're using an app on a different
device

79
00:04:36,005 --> 00:04:41,021
so for example if I'm on my iPad or my
iPhone or maybe even a different Mac

80
00:04:41,021 --> 00:04:44,083
I'm using something like male you'll see
it actually show up it

81
00:04:44,083 --> 00:04:47,105
in the dock right at the end there you
can click on it

82
00:04:48,005 --> 00:04:51,934
to get back to to what you're doing
essentially to start the hand of

83
00:04:51,979 --> 00:04:56,840
you also find it in command tab so that
you can go ahead and he commands have

84
00:04:56,084 --> 00:04:59,143
cycle to your absolute there and choose
to pull over the activity that you won't

85
00:05:00,043 --> 00:05:00,052
be working with

86
00:05:01,033 --> 00:05:06,842
here you see is is your mail that came
from from my iPad

87
00:05:07,139 --> 00:05:10,780
okay so when it comes to adopting
hand-off there's really three main

88
00:05:10,078 --> 00:05:11,084
things

89
00:05:11,084 --> 00:05:15,933
the you need to think about the first
and releases kind the most important is

90
00:05:16,689 --> 00:05:17,580
the siding

91
00:05:17,058 --> 00:05:20,112
what activities in your app you really
want to support

92
00:05:21,012 --> 00:05:25,591
now this this the skirmishing thing to
talk about the fundamental unit

93
00:05:25,699 --> 00:05:30,300
in hand of is this notion oven activity
and what you really wanna be thinking

94
00:05:30,003 --> 00:05:30,372
about

95
00:05:30,669 --> 00:05:33,671
are what does the users think about is
they're using

96
00:05:33,689 --> 00:05:38,737
your app about constituting say
different types of things so for example

97
00:05:39,169 --> 00:05:42,930
in mail you've got a very clear split
between I'm reading email

98
00:05:42,093 --> 00:05:46,099
verses I'm writing you know those are
two different types of activities that

99
00:05:46,099 --> 00:05:48,146
you would want to have an indie that we
do have

100
00:05:49,046 --> 00:05:52,050
in the case have hand-off so what you're
trying to do is

101
00:05:52,086 --> 00:05:56,415
not only provide a nice grouping up
these discrete past

102
00:05:57,189 --> 00:06:00,900
the not only just to make things simpler
for you but also because it will talk

103
00:06:00,009 --> 00:06:01,178
about leader

104
00:06:02,069 --> 00:06:06,072
when you go to resume these activities
on it on another device

105
00:06:06,099 --> 00:06:09,186
having some clear separation between
what typeof activity you're actually

106
00:06:09,969 --> 00:06:11,620
trying to resume

107
00:06:11,062 --> 00:06:14,074
can be really important can help you do
so much better things in the user

108
00:06:14,074 --> 00:06:15,168
experience

109
00:06:16,068 --> 00:06:20,827
are to step 2 is actually creating the
activities in the first place

110
00:06:21,439 --> 00:06:25,150
this is also really easy to do we'll
have a lot to go in to talk about how to

111
00:06:25,015 --> 00:06:26,614
actually do this

112
00:06:26,749 --> 00:06:30,777
and third and final you need to be able
to handle incoming activities into your

113
00:06:31,029 --> 00:06:33,110
application so if you have kids

114
00:06:33,011 --> 00:06:38,190
launched or gets resumed and the system
hand you this activity to deal with you

115
00:06:38,289 --> 00:06:41,326
need to make sure that you are basically
taking the user back to where they want

116
00:06:41,659 --> 00:06:42,666
to be

117
00:06:42,729 --> 00:06:46,751
in your application so I mention this
before but the

118
00:06:46,949 --> 00:06:50,967
the fundamental unit here is the
activity when you're dealing with

119
00:06:51,129 --> 00:06:54,157
with hand of and specifically this is a

120
00:06:54,409 --> 00:06:57,497
this is a single class it NS user
activity

121
00:06:58,289 --> 00:07:03,289
I am very happy to tell you that it is
only one class it has only a few methods

122
00:07:03,289 --> 00:07:06,740
and it's the same across both i OS
analyst at

123
00:07:06,074 --> 00:07:09,115
so you get a chance to learn how to do
this in one place and its gonna map

124
00:07:10,015 --> 00:07:12,102
completely to the other platform you
don't have to worry about

125
00:07:13,002 --> 00:07:18,046
a huge difference is an API or anything
to super simple to use

126
00:07:18,046 --> 00:07:21,127
so you're working with Dennis user
activity so you've got something like

127
00:07:22,027 --> 00:07:23,074
mail for example

128
00:07:23,074 --> 00:07:27,102
as you are composing an email this is a
great example love

129
00:07:28,002 --> 00:07:31,181
a discrete activity that's being done
this as mail saying I'm

130
00:07:31,199 --> 00:07:36,680
I'm composing and when you actually tell
this activity to become

131
00:07:36,068 --> 00:07:39,099
active become current what become
current

132
00:07:39,099 --> 00:07:43,948
does it tells us that this device it
should start broadcasting two devices

133
00:07:44,839 --> 00:07:48,400
around it that a desperate the user is
doing something

134
00:07:48,004 --> 00:07:51,073
the can be handed off and

135
00:07:51,469 --> 00:07:54,469
there's the devices then can know to be
able to show things like

136
00:07:54,469 --> 00:07:57,504
the icon the corresponds to that up

137
00:07:57,819 --> 00:08:02,835
now again when you make when these
activities this broadcasting goes out

138
00:08:02,979 --> 00:08:07,740
you end up with a very lower left corner
there you get this icon that shows up

139
00:08:07,074 --> 00:08:10,393
and the UN the user can go ahead and
resume from there

140
00:08:11,059 --> 00:08:14,081
now the key thing here is that when the
user actually slides up on the

141
00:08:14,279 --> 00:08:15,610
lockscreen

142
00:08:15,061 --> 00:08:19,700
the device where they're going to
actually connects back to you

143
00:08:20,249 --> 00:08:24,312
the original device and what its
basically saying is hey users here they

144
00:08:24,879 --> 00:08:25,300
want

145
00:08:25,003 --> 00:08:28,182
they want this DataQuick give me
information about

146
00:08:28,479 --> 00:08:32,540
the activity that they were actually
doing we handle all that for you

147
00:08:33,089 --> 00:08:38,110
the activity gets packaged up we send it
across to the device words words being

148
00:08:38,011 --> 00:08:42,370
resumed the system gets it your apt its
launch

149
00:08:42,469 --> 00:08:46,550
and that's it super simple to work with

150
00:08:46,055 --> 00:08:51,068
now hand-off also has I to really cool
features that you can take advantage of

151
00:08:51,068 --> 00:08:55,162
even beyond just basic activities the
first is the ability to to actually

152
00:08:56,062 --> 00:08:56,149
create

153
00:08:57,049 --> 00:09:01,062
live streams between two different
instances have your app

154
00:09:01,062 --> 00:09:04,086
on different devices so is part iv:

155
00:09:04,086 --> 00:09:07,094
it's part of doing at hand often
resuming on another device

156
00:09:08,066 --> 00:09:12,098
you can actually have that app connect
back to the original machine and just

157
00:09:12,098 --> 00:09:12,185
get an open

158
00:09:13,085 --> 00:09:17,074
an extreme on either side to be able to
keep talking back and forth

159
00:09:17,839 --> 00:09:19,913
so you can imagine there's some pretty
cool stuff that you get that you can do

160
00:09:20,579 --> 00:09:21,635
with that

161
00:09:22,139 --> 00:09:26,610
now second I imagine for some people in
this room this will be a really big deal

162
00:09:26,061 --> 00:09:29,156
we support handoff between native app
that you own

163
00:09:30,056 --> 00:09:37,056
and web sites the you own so if you've
got

164
00:09:38,639 --> 00:09:41,660
so if you got and I O S app and

165
00:09:41,066 --> 00:09:45,985
a really great website you can actually
hand of seamlessly between the two

166
00:09:46,579 --> 00:09:50,740
so that's really really cool art safford
today's agenda

167
00:09:50,074 --> 00:09:53,131
we're going to a few things here and
take a look at specifically

168
00:09:54,031 --> 00:09:58,031
ap kid and you like it is support for
hand often and what that looks like how

169
00:09:58,031 --> 00:09:59,106
you adopt things

170
00:10:00,006 --> 00:10:03,465
will talk about working with and its
user activity directly to seek

171
00:10:03,519 --> 00:10:07,160
understand the PI their summer dance
things that you can do you

172
00:10:07,016 --> 00:10:10,125
will get into you native app to website
hand-off

173
00:10:10,269 --> 00:10:13,680
and also look at using these
continuation streams

174
00:10:13,068 --> 00:10:17,407
between different aP's and with that I
like to hand it off to you Vince Peter

175
00:10:18,019 --> 00:10:18,920
to talk to you about

176
00:10:18,092 --> 00:10:25,092
adopting hand often you're out thank you

177
00:10:26,097 --> 00:10:29,180
thank you very so a adopting hand-off

178
00:10:30,008 --> 00:10:33,041
in your app there are a 3

179
00:10:34,013 --> 00:10:37,402
key pieces to the apt kit and UI kit
support

180
00:10:37,519 --> 00:10:41,050
in hand of a the first is creating

181
00:10:41,005 --> 00:10:47,006
these user activities a and advertising
them to your nearby devices

182
00:10:47,006 --> 00:10:50,785
the second is updating the user activity
with your

183
00:10:50,839 --> 00:10:53,906
state about what the users doing in your
app

184
00:10:54,509 --> 00:10:57,610
and the third is using that information
that you put in

185
00:10:57,061 --> 00:11:02,160
to resume what the users doing another
device

186
00:11:02,709 --> 00:11:06,420
so starting at the beginning creating
user activities

187
00:11:06,042 --> 00:11:10,191
the first step is the kind to take a
step back before you write any code

188
00:11:10,569 --> 00:11:13,613
and ask what do users do in my app

189
00:11:14,009 --> 00:11:17,880
hopefully this is a pretty simple
question to answer here's an example

190
00:11:17,088 --> 00:11:17,347
from

191
00:11:18,139 --> 00:11:21,182
OS 10 what's the user doing here

192
00:11:21,569 --> 00:11:24,620
well their composing an email message

193
00:11:24,062 --> 00:11:28,086
here's another example from I O S what
are they doing

194
00:11:28,086 --> 00:11:32,160
composing an email message it's the same
activity on a different device

195
00:11:33,006 --> 00:11:37,014
some other examples of activities would
be things like reading messages picking

196
00:11:37,068 --> 00:11:38,136
an item from a list

197
00:11:39,036 --> 00:11:44,118
or editing a document these are fairly
continuous things that the users engaged

198
00:11:45,018 --> 00:11:45,797
in in your

199
00:11:45,959 --> 00:11:49,810
up up things like clicking a button

200
00:11:49,081 --> 00:11:52,144
or typing the subjectivity email

201
00:11:53,044 --> 00:11:56,373
are not really user activities those are
kinda part sir

202
00:11:56,769 --> 00:11:59,850
actions that are part I love the user
activity

203
00:11:59,085 --> 00:12:02,124
so they're fairly broad a and their
continuous

204
00:12:03,024 --> 00:12:06,066
on be so once you

205
00:12:06,066 --> 00:12:10,144
identified what your app is what users
are doing in your app

206
00:12:11,044 --> 00:12:14,050
you'll find that usually there are some
UI elements

207
00:12:14,005 --> 00:12:17,774
that are responsible for presenting that

208
00:12:18,269 --> 00:12:23,940
to the user maybe it's a window or %uh
view controller

209
00:12:23,094 --> 00:12:27,143
a and on I O S 8 and/or scan yosemite

210
00:12:28,043 --> 00:12:32,112
a and this document you I document s
responder and UI responder

211
00:12:33,012 --> 00:12:37,068
have a user activity property and
remembered that

212
00:12:37,068 --> 00:12:42,217
responder is a base class for a larger
view I elements includes views

213
00:12:42,829 --> 00:12:46,720
Windows new controllers window
controllers

214
00:12:46,072 --> 00:12:51,691
so odds are good if it's in your UI it
has the user activity property

215
00:12:52,339 --> 00:12:56,420
and use it kinda like this so the first
step is to create

216
00:12:56,042 --> 00:12:59,094
and and this user activity instance and
you do that with

217
00:12:59,094 --> 00:13:03,129
Alec in it with activity type and you're
passing it in activity type

218
00:13:04,029 --> 00:13:08,578
which is a string that identifies the
kind of activity

219
00:13:08,839 --> 00:13:13,850
that this is a it will also appear in
your info keyless

220
00:13:13,085 --> 00:13:17,264
and we'll talk a little bit more about
that later

221
00:13:18,029 --> 00:13:22,064
so after you have the Ennis user
activity instance you can configure it

222
00:13:22,379 --> 00:13:27,350
it has some properties like a title and
then you said it on your document a

223
00:13:27,035 --> 00:13:27,110
responder

224
00:13:28,001 --> 00:13:32,095
just like any other property

225
00:13:33,004 --> 00:13:36,069
so for document bass tabs a it even
easier

226
00:13:36,069 --> 00:13:40,898
a all you need to do is add Ennis
ubiquitous document user activity type

227
00:13:41,519 --> 00:13:46,180
to your in info keyless under each CF
bundle document types

228
00:13:46,018 --> 00:13:49,075
entry the basic idea is you're giving us

229
00:13:49,075 --> 00:13:52,954
an activity type for each of your
document types and it's perfectly okay

230
00:13:53,629 --> 00:13:58,631
to have the same activity type for
multiple document types

231
00:13:58,649 --> 00:14:03,050
and when that info cue when that is in
your info P list

232
00:14:03,005 --> 00:14:06,044
we will automatically create units user
activity

233
00:14:06,089 --> 00:14:12,050
and said it on your document when the
document is an eye cloud

234
00:14:12,005 --> 00:14:16,544
on West Penn a since and this document
can move out with high cloud and back in

235
00:14:16,589 --> 00:14:17,608
the high cloud

236
00:14:17,779 --> 00:14:22,550
a we will be updating that user activity
when that happens so we will set the

237
00:14:22,055 --> 00:14:23,068
property the mill

238
00:14:23,068 --> 00:14:26,122
for example when it moves out of high
cloud and then create a new one if it

239
00:14:27,022 --> 00:14:29,029
gets moved into high club

240
00:14:29,029 --> 00:14:32,122
in you if you want to know that is
happening if you're using the user

241
00:14:33,022 --> 00:14:35,049
activity and sharing it may be

242
00:14:35,049 --> 00:14:39,768
a you can't use Kb 0 and just observe
the user activity key

243
00:14:40,209 --> 00:14:46,430
on the document so for other APs that
are not document based

244
00:14:46,043 --> 00:14:49,262
you still need to put your activity
types in the info P list

245
00:14:49,649 --> 00:14:52,870
but it goes under this and this user
activity types array

246
00:14:52,087 --> 00:14:56,093
that's at the top level and again we'll
talk more about activity types later

247
00:14:57,047 --> 00:15:02,036
for documents in responders when they
have a user activity property set

248
00:15:02,459 --> 00:15:05,482
on their a doctor in a responder

249
00:15:05,689 --> 00:15:08,723
at Keeton you like it will manage it for
you

250
00:15:09,029 --> 00:15:12,071
what this means is we call become
current

251
00:15:12,449 --> 00:15:15,530
and become current is a matted on any
issues or activity

252
00:15:16,259 --> 00:15:20,250
that makes the INS user activity v1 user
activity

253
00:15:20,025 --> 00:15:23,042
the current user activity that the users
engaged in

254
00:15:23,042 --> 00:15:27,117
any kids advertise to all other nearby
applications

255
00:15:28,017 --> 00:15:34,116
so here's the with this kinda looks like
so the iPhone has an issues are activity

256
00:15:34,269 --> 00:15:37,361
and become current gets called on it

257
00:15:38,189 --> 00:15:42,410
and that gets advertised all your nearby
devices and they show up in the lock

258
00:15:42,041 --> 00:15:45,700
screen or the doctor what have you

259
00:15:46,069 --> 00:15:49,160
so become current on

260
00:15:49,016 --> 00:15:54,185
you can call it yourself bud at can't
you like it will also call it at some

261
00:15:54,329 --> 00:15:55,334
key points

262
00:15:55,829 --> 00:15:59,610
so you probably don't have to on iowa's

263
00:15:59,061 --> 00:16:02,072
a this means that when your app is
launched

264
00:16:02,072 --> 00:16:05,291
comes into the foreground or tabs are
switched

265
00:16:05,939 --> 00:16:09,004
you like it will walk the view
controller hierarchy

266
00:16:09,589 --> 00:16:12,590
including presented view controllers

267
00:16:12,689 --> 00:16:15,930
and we're only looking at view
controllers that have views which are

268
00:16:15,093 --> 00:16:19,982
in the view hierarchy and if those view
if we find a view controller that has a

269
00:16:20,819 --> 00:16:22,490
user activity

270
00:16:22,049 --> 00:16:26,057
that's the current you directory and we
call become current on

271
00:16:27,029 --> 00:16:32,368
additionally when user activity is set
initially on you I view controller

272
00:16:32,629 --> 00:16:36,990
if the view controllers in a transition
will wait until it's finished

273
00:16:36,099 --> 00:16:39,142
but if the view controllers views in the
window hierarchy

274
00:16:40,042 --> 00:16:45,651
we will a automatically become current
on it immediately

275
00:16:46,029 --> 00:16:50,045
so that's my view controller you I
document will not become current

276
00:16:50,189 --> 00:16:54,300
automatically but it's really easy to
share it with a

277
00:16:54,003 --> 00:16:57,642
share your user activity with a view
controller that will all you need to do

278
00:16:57,939 --> 00:17:02,300
is set the view controllers user
activity to that document user activity

279
00:17:02,003 --> 00:17:05,088
and whenever that view controller is
found according to the

280
00:17:06,015 --> 00:17:10,944
rules in the previous slide it will
become current

281
00:17:11,079 --> 00:17:14,790
on August 10 it's a little bit different

282
00:17:14,079 --> 00:17:17,097
a apk it looks for user activity in

283
00:17:17,097 --> 00:17:20,164
to places the first is the

284
00:17:21,064 --> 00:17:25,135
mean windows responder chain we goal we
started the first responder in go

285
00:17:26,035 --> 00:17:27,126
through the next responders looking for

286
00:17:28,026 --> 00:17:31,072
one with the user activity set and if we
find it

287
00:17:31,072 --> 00:17:36,084
that's the current activity we call
become current on that user activity

288
00:17:36,084 --> 00:17:40,096
and will also look at the main window
controllers document

289
00:17:40,096 --> 00:17:44,165
and if it has a user activity will call
become current on that

290
00:17:45,029 --> 00:17:49,067
and we will also reevaluate this when
appropriate as the main window changes

291
00:17:49,409 --> 00:17:51,140
or the user activity it's at

292
00:17:51,014 --> 00:17:54,017
will do this search and find the right
thing to become current

293
00:17:54,044 --> 00:17:57,072
on

294
00:17:57,072 --> 00:18:00,111
so we manage it for you we call become
current

295
00:18:01,011 --> 00:18:05,680
we will also call invalidate and
invalidate

296
00:18:05,779 --> 00:18:09,110
is a method also on an issues are
activity

297
00:18:09,011 --> 00:18:13,039
which means that the secretary is
finished the user's done with it

298
00:18:13,039 --> 00:18:17,039
they put it away they your no longer
doing

299
00:18:17,039 --> 00:18:21,108
what they were doing so that with
something kind of like this

300
00:18:22,008 --> 00:18:26,090
so same setup as before the iPhone it
has the current activity that's being

301
00:18:26,009 --> 00:18:29,018
advertised are you're nearby devices

302
00:18:29,909 --> 00:18:34,860
and invalidate gets called and it stops
being the current activities so the user

303
00:18:34,086 --> 00:18:36,086
can continue it anymore

304
00:18:36,086 --> 00:18:40,525
they've closed the window it's finished
it's done

305
00:18:41,299 --> 00:18:44,360
so that's creating user activities and

306
00:18:44,036 --> 00:18:47,071
leading are you nearby devices no

307
00:18:47,071 --> 00:18:50,085
what the user is doing

308
00:18:50,085 --> 00:18:53,140
the next step is putting your
information

309
00:18:54,004 --> 00:18:57,053
into the user in activity but to

310
00:18:57,089 --> 00:19:00,368
let a so that you can

311
00:19:01,169 --> 00:19:05,940
restore the stay when it gets continue

312
00:19:05,094 --> 00:19:09,122
so a Ennis user activity has a user info
dictionary for this purpose

313
00:19:10,022 --> 00:19:13,231
it is yours to use a

314
00:19:13,429 --> 00:19:17,466
you feel it out when are you get this
call back so this is a method

315
00:19:17,799 --> 00:19:21,940
on Minister a and this document you I
document and the responders

316
00:19:21,094 --> 00:19:24,098
update user activity state

317
00:19:24,098 --> 00:19:27,407
and you you in this message you fill out
the

318
00:19:28,289 --> 00:19:32,340
user activities user info with the state

319
00:19:32,034 --> 00:19:37,123
%uh your responder document and whatever
you want about what the user

320
00:19:37,429 --> 00:19:40,750
is doing

321
00:19:40,075 --> 00:19:44,101
note that the user info is empty each
time we make these call backs

322
00:19:45,001 --> 00:19:50,007
so before update user activity status
called on your documents are responders

323
00:19:50,061 --> 00:19:50,360
will

324
00:19:50,909 --> 00:19:55,380
empty that out in on the user activity

325
00:19:55,038 --> 00:19:58,447
so all you need to do is add to the user
info you don't need to worry about

326
00:19:58,789 --> 00:20:02,740
clearing out old date or anything like
that

327
00:20:02,074 --> 00:20:07,003
so look something kinda like this update
user activity stay

328
00:20:07,669 --> 00:20:11,757
don't forget call super there's a
convenience method on an issues activity

329
00:20:12,549 --> 00:20:15,620
called update user info entries from
dictionary

330
00:20:15,062 --> 00:20:21,073
and that's a really easy way to get your
information into the user activity

331
00:20:21,073 --> 00:20:24,892
and we will call this at an appropriate
time

332
00:20:25,549 --> 00:20:29,080
but not necessarily when the user
continues

333
00:20:29,008 --> 00:20:32,967
but just an inappropriate opportune time
we will call this to gather the

334
00:20:33,039 --> 00:20:36,088
information about the user activity

335
00:20:36,529 --> 00:20:40,690
and when the info that you put in the
user activity becomes stale

336
00:20:40,069 --> 00:20:45,087
there's a need save property are on an
issues are activity that submarine

337
00:20:45,087 --> 00:20:48,766
and all you do is set that yes and we
will call

338
00:20:49,549 --> 00:20:53,610
the update user activity statement again
later

339
00:20:54,159 --> 00:20:58,208
set need saved is very cheap you should
call it as your data changes

340
00:20:58,649 --> 00:21:04,990
and we'll call you back later with the
update user activity state

341
00:21:04,099 --> 00:21:07,152
so what can you put in the user info

342
00:21:08,052 --> 00:21:12,331
it's a dictionary and you can store most
P was pipes are

343
00:21:12,799 --> 00:21:16,824
all P was types and a few others
including URL's

344
00:21:17,049 --> 00:21:20,480
and for euros file URL's

345
00:21:20,048 --> 00:21:23,124
are obviously a little problematic the
the same

346
00:21:24,024 --> 00:21:28,096
past might point to different places on
different devices the actual file might

347
00:21:28,096 --> 00:21:29,137
not be there

348
00:21:30,037 --> 00:21:33,076
%uh however value world and I cloud

349
00:21:33,076 --> 00:21:36,083
are okay and if you're I was only

350
00:21:36,083 --> 00:21:39,098
from a document provider are OK too

351
00:21:39,098 --> 00:21:42,102
we will automatically do some
translation so

352
00:21:43,038 --> 00:21:46,057
the file the file euro is pointing

353
00:21:46,399 --> 00:21:49,630
to the right fine

354
00:21:49,063 --> 00:21:54,342
a couple other things because keep the
middle amount information in the user

355
00:21:54,909 --> 00:21:55,640
info

356
00:21:55,064 --> 00:21:59,132
so just put what you need a to get the
user back to where they are

357
00:22:00,032 --> 00:22:03,114
the transfer times for these things can
vary quite a lot so every bite really

358
00:22:04,014 --> 00:22:06,033
counts

359
00:22:06,033 --> 00:22:09,852
just include the state so don't include
your document

360
00:22:10,149 --> 00:22:13,940
if you're using I cloud fantastic all
you need to do is store the file you

361
00:22:13,094 --> 00:22:14,127
were all and then you can

362
00:22:15,027 --> 00:22:18,034
use that a if you're

363
00:22:18,034 --> 00:22:24,343
data stored on the web somewhere put a
reference to that new user info

364
00:22:24,649 --> 00:22:28,360
also try to avoid platform specifics
since this is the

365
00:22:28,036 --> 00:22:32,041
user activity might be continued on a
Mac or an iPad or an iPhone

366
00:22:32,086 --> 00:22:35,132
there are a lot of things like the
visible racked up a ScrollView which

367
00:22:36,032 --> 00:22:37,099
don't really make sense

368
00:22:37,099 --> 00:22:41,778
across all those contacts it's better to
use a heuristic like

369
00:22:42,669 --> 00:22:45,750
the middle item that is in my ScrollView

370
00:22:45,075 --> 00:22:48,147
and storing our offset are a reference
to that instead

371
00:22:49,047 --> 00:22:56,047
a storing a visible racked for each
potential thing you are continuing on

372
00:22:57,005 --> 00:23:01,064
also an issue I document will add their
file URL

373
00:23:01,559 --> 00:23:06,190
automatically in there update user
activity state implementations

374
00:23:06,019 --> 00:23:09,064
with the Ennis user activity document
URL key so

375
00:23:09,064 --> 00:23:14,843
you don't need to will already be there
don't repeat it

376
00:23:15,419 --> 00:23:18,470
a a couple other things

377
00:23:18,929 --> 00:23:23,004
think about versioning you're gonna
wanna future-proof your app

378
00:23:23,679 --> 00:23:29,480
as you make new versions you're gonna
have changes to your user activities

379
00:23:29,048 --> 00:23:32,112
so you might want to do something like
include a version in your

380
00:23:33,012 --> 00:23:37,070
user info it could be something like
this

381
00:23:37,007 --> 00:23:41,039
in here were actually using the
application did update user activity app

382
00:23:42,002 --> 00:23:43,411
delegate method

383
00:23:43,429 --> 00:23:48,429
which is called after any other
documents responders get that update

384
00:23:48,429 --> 00:23:50,220
user activity state called

385
00:23:50,022 --> 00:23:53,051
on them so this is actually a

386
00:23:53,051 --> 00:23:56,080
a really good debugging point if you

387
00:23:56,539 --> 00:24:01,470
up want to know what's exactly is in
your user info

388
00:24:01,047 --> 00:24:07,112
set a breakpoint here in check it out
and we'll tell you what's in there

389
00:24:08,012 --> 00:24:11,024
so now we have put

390
00:24:11,024 --> 00:24:14,203
our information about what the users
doing

391
00:24:14,419 --> 00:24:17,460
in the Ennis user activity

392
00:24:17,046 --> 00:24:21,058
the next step is using that information
on another device

393
00:24:21,058 --> 00:24:26,149
to continue and get the user right back
to what they were doing

394
00:24:27,049 --> 00:24:30,097
so again this is on another device so

395
00:24:30,097 --> 00:24:34,906
your you a the devices receive an
advertisement that

396
00:24:35,779 --> 00:24:39,980
this user other user activity is current
on another device

397
00:24:39,098 --> 00:24:42,647
and it's showing up in the lock screen
at the doctor what have you

398
00:24:43,529 --> 00:24:46,580
and the user indicates that they want to

399
00:24:47,039 --> 00:24:50,078
continue your application

400
00:24:50,429 --> 00:24:53,440
and we will call this on your app
delegate

401
00:24:53,044 --> 00:24:57,101
application will continue user activity
with tight

402
00:24:58,001 --> 00:25:01,096
and note that there is no Ennis user
activity here

403
00:25:01,096 --> 00:25:04,915
a all you have is the activity type in
that's because we have been actually

404
00:25:05,779 --> 00:25:06,470
fetched

405
00:25:06,047 --> 00:25:09,145
the user activity completely yet

406
00:25:10,045 --> 00:25:16,384
we will start touching it immediately
after when you get this call

407
00:25:16,789 --> 00:25:20,812
and you should use this to show the user
what's being continue you have the

408
00:25:21,019 --> 00:25:23,090
activity type so you have an idea

409
00:25:23,009 --> 00:25:26,082
up what kind of activity it is and maybe
you can enemy

410
00:25:26,082 --> 00:25:29,113
a view controller in or something so the
wait is

411
00:25:30,013 --> 00:25:35,292
a perceived less

412
00:25:35,409 --> 00:25:39,880
so you should return yes if you're
handling this and you're showing some

413
00:25:39,088 --> 00:25:39,747
kind of

414
00:25:40,539 --> 00:25:43,601
feedback to the user our return 0

415
00:25:44,159 --> 00:25:47,234
or if it's not implemented n you get the
system's behavior

416
00:25:47,909 --> 00:25:52,921
now on iowa's this means the default
paying panelist and you get nothing

417
00:25:53,029 --> 00:25:58,730
so it's a really good idea to implement
this weekend

418
00:25:58,073 --> 00:26:01,136
here's an example of what that might
look like

419
00:26:02,036 --> 00:26:05,455
shares you can see you were checking the
activity type and

420
00:26:05,779 --> 00:26:10,630
if it's %uh viewing message activity we
know that we're going to need a message

421
00:26:10,063 --> 00:26:11,452
view controller

422
00:26:12,019 --> 00:26:16,190
and so we set that up and we show it to
the user

423
00:26:16,019 --> 00:26:20,388
and then we return yes because we are
handling showing feedback to that user

424
00:26:20,559 --> 00:26:24,190
about that activity type so once the

425
00:26:24,019 --> 00:26:30,020
user a in the user activity has been
faxed from the other device

426
00:26:30,002 --> 00:26:33,096
we will reconstruct the Ennis user
activity and give it to you

427
00:26:34,014 --> 00:26:38,083
in this app delegate method application
continues our activity restoration

428
00:26:38,083 --> 00:26:39,175
handler

429
00:26:40,075 --> 00:26:43,139
and this is the place where you
reconstruct the users activity you get

430
00:26:44,039 --> 00:26:48,046
them back to whatever it was they were
doing

431
00:26:48,046 --> 00:26:52,875
again a return yes if you've handled
this user activity

432
00:26:53,289 --> 00:26:57,302
return 0 or leave it on implemented and
we can continue

433
00:26:57,419 --> 00:27:03,350
some user activities for you

434
00:27:03,035 --> 00:27:07,062
so this restoration handler

435
00:27:07,062 --> 00:27:11,099
it's a block that we pass in DFU and you
call it

436
00:27:11,099 --> 00:27:14,108
and you give it an array %uh documents
in responders

437
00:27:15,089 --> 00:27:19,097
there are presenting the user activity
and will call a method that's

438
00:27:19,097 --> 00:27:23,186
restore user activity state that is
paired with that update user activity

439
00:27:24,059 --> 00:27:27,190
state from before

440
00:27:27,019 --> 00:27:30,034
here's an example what that might look
like

441
00:27:30,034 --> 00:27:33,853
so we're checking the activity type in
interviewing message activity

442
00:27:34,159 --> 00:27:39,570
so we get our message view controller
and that we return yes

443
00:27:39,057 --> 00:27:43,148
and know we're also a calling the
restoration handler with this view

444
00:27:44,048 --> 00:27:45,137
controller

445
00:27:46,037 --> 00:27:51,226
and when you do that restore user
activity stay is getting called on that

446
00:27:51,559 --> 00:27:52,990
you controller

447
00:27:52,099 --> 00:27:55,150
and you can use the information in the
user info

448
00:27:56,005 --> 00:28:00,006
to kinda reconstruct whatever is the
user was doing

449
00:28:00,006 --> 00:28:04,079
but and a more local level so just for
your view controller

450
00:28:05,033 --> 00:28:08,075
you can also call this manually as you
can see at the bottom a

451
00:28:08,075 --> 00:28:12,384
it's perfectly fine this column restore
user activity state yourself

452
00:28:13,059 --> 00:28:16,131
and that's actually useful pattern to
restore

453
00:28:16,779 --> 00:28:19,779
the users stay in build your view
controller hierarchy

454
00:28:19,779 --> 00:28:23,780
at the same time

455
00:28:23,789 --> 00:28:27,853
so that if everything goes well it's
entirely possible since there are bits

456
00:28:28,429 --> 00:28:30,527
flying through the air that some might
collide

457
00:28:31,409 --> 00:28:35,500
and will fail to retrieve the user
activity information from the other

458
00:28:35,005 --> 00:28:36,067
device

459
00:28:37,012 --> 00:28:40,019
and if there was an air we will call
this on your app delegate application

460
00:28:40,082 --> 00:28:42,561
did feel to continue user activity with
type:

461
00:28:43,299 --> 00:28:48,360
air and you should present the heir to
the user and do whatever cleanup you

462
00:28:48,909 --> 00:28:50,760
need to do here

463
00:28:50,076 --> 00:28:53,170
on we make a guarantee you that four

464
00:28:54,007 --> 00:28:57,069
every time you get will continue user
activity

465
00:28:58,032 --> 00:29:03,141
you will get exactly one love either
continue user activity or did failed

466
00:29:03,429 --> 00:29:07,710
to continue user activity so you can
rely on that will appear

467
00:29:07,071 --> 00:29:10,159
those also take note that

468
00:29:11,059 --> 00:29:14,076
the air can be an issues or cancel their

469
00:29:14,076 --> 00:29:19,161
in which case a you probably don't wanna
bug the user about it

470
00:29:20,061 --> 00:29:24,110
usually that will happen if the user
tries to continue something

471
00:29:24,659 --> 00:29:28,440
while we're still fetching information
about a previous activity will

472
00:29:28,044 --> 00:29:33,143
automatically cancel that previous
activities

473
00:29:33,539 --> 00:29:37,578
so that's a all you need a but for
docking base taps

474
00:29:37,929 --> 00:29:44,230
a II US you continue the user activity
kinda like this

475
00:29:44,023 --> 00:29:48,562
so you want to get the URL out all the
user info using the INS user activity

476
00:29:48,769 --> 00:29:50,380
document you are all key

477
00:29:50,038 --> 00:29:53,047
and create your right you I document a

478
00:29:53,047 --> 00:29:57,145
subclass and then you can pass it to the
restoration him learn that you I

479
00:29:58,045 --> 00:29:59,046
document will get

480
00:29:59,046 --> 00:30:02,100
its restore user activity statement and
called on it

481
00:30:03,000 --> 00:30:06,049
so it's pretty easy on August 10

482
00:30:06,049 --> 00:30:09,948
Aki can use in this document controller
to do this for you

483
00:30:10,389 --> 00:30:14,405
so it will automatically get out the
file you were all find the right

484
00:30:14,549 --> 00:30:16,760
documents some class to create

485
00:30:16,076 --> 00:30:19,485
and created and then we'll pass

486
00:30:20,169 --> 00:30:23,700
a we will call restore user activity
statement give you the

487
00:30:23,007 --> 00:30:26,058
user activity object so you can restore
up

488
00:30:27,021 --> 00:30:32,060
the user state here's a diagram to kinda
go through this

489
00:30:32,006 --> 00:30:37,815
up continuing process so it's similar to
be for the iPhone has advertised the

490
00:30:38,409 --> 00:30:40,110
user activity

491
00:30:40,011 --> 00:30:43,070
to that then the user is continuing on
their Mac

492
00:30:43,007 --> 00:30:46,022
and when the user indicates they want to
continue

493
00:30:46,085 --> 00:30:50,087
we will call application will continue
user activity with type: on your app

494
00:30:50,087 --> 00:30:51,170
delegate

495
00:30:52,007 --> 00:30:55,856
and you've implemented it to you give
the User some feedback

496
00:30:56,549 --> 00:31:01,870
that it's being continued maybe you've
animated in a view controller some

497
00:31:01,087 --> 00:31:02,099
things so that

498
00:31:02,099 --> 00:31:07,112
by the time we actually get the activity
maybe the animation is still happening

499
00:31:08,012 --> 00:31:13,035
and the user doesn't even have to wait

500
00:31:13,035 --> 00:31:16,035
so we will then ask the

501
00:31:16,035 --> 00:31:21,104
a device were continuing from for the
information about the user activity

502
00:31:21,419 --> 00:31:26,444
and we'll get it back and will recreate
the Ennis user activity instance in pass

503
00:31:26,669 --> 00:31:26,744
it to you

504
00:31:27,419 --> 00:31:33,470
in application continue user activity
restoration handler

505
00:31:33,929 --> 00:31:39,013
in that netted you use the information
in the user activity to get the

506
00:31:39,769 --> 00:31:43,380
the user back to whatever it was they
were doing

507
00:31:43,038 --> 00:31:47,837
this might include passing some things
into the restoration handler

508
00:31:48,179 --> 00:31:53,320
and if you do that we will call restore
user activity state

509
00:31:53,032 --> 00:31:56,074
on them and then users

510
00:31:56,074 --> 00:32:01,099
right where they left off you've created
a user activity on one device

511
00:32:01,099 --> 00:32:04,187
put your information about what the
users doing into the indices activity

512
00:32:05,087 --> 00:32:06,476
object

513
00:32:07,259 --> 00:32:10,600
and handed it off to another device that
is able to continue

514
00:32:10,006 --> 00:32:14,090
and get the user back to whatever's they
were doing

515
00:32:15,044 --> 00:32:19,393
so there's still a few more details
about Ennis user activity

516
00:32:19,789 --> 00:32:23,815
and there's a couple other really cool
things that Ennis user activity can do

517
00:32:24,049 --> 00:32:30,130
and Q staten field will be explaining
that

518
00:32:30,013 --> 00:32:34,772
thanks very much I excited to be here
and show you when working on for a while

519
00:32:34,889 --> 00:32:38,860
I and has been said I'm explain a little
more

520
00:32:38,086 --> 00:32:43,385
about how you might use this I'm you've
already seen almost everything that's

521
00:32:44,159 --> 00:32:46,850
and an issues are activity by this point

522
00:32:46,085 --> 00:32:49,404
um and ap kidding you like it provide

523
00:32:50,169 --> 00:32:53,830
a lot of functionality that makes it
really easy to adopt this

524
00:32:53,083 --> 00:32:57,532
but if you have some need to do
something for little outside the norm

525
00:32:58,279 --> 00:33:01,280
it'll it's useful to understand

526
00:33:01,289 --> 00:33:04,750
at the basic things what's there and
what you can do it thanks

527
00:33:04,075 --> 00:33:07,120
arm jury originally said

528
00:33:08,002 --> 00:33:11,069
and Vince pointed out you know and this
user activities are just objects are

529
00:33:11,087 --> 00:33:12,256
allocated

530
00:33:13,039 --> 00:33:16,113
I we've talked about this activity type
string a couple times

531
00:33:16,779 --> 00:33:20,802
so let's go into that a little more you
create one of these user activity type

532
00:33:21,009 --> 00:33:23,230
string sign your application and you

533
00:33:23,023 --> 00:33:26,952
pass it to the Alexa net I'm or

534
00:33:27,159 --> 00:33:31,740
I you've put it in your city upon all
types in the NFC because document types

535
00:33:31,074 --> 00:33:31,112
key

536
00:33:32,012 --> 00:33:36,061
I and where did you get the string from
I in a sense you just made it up

537
00:33:36,061 --> 00:33:40,010
arm that string is a string that we as
the system use

538
00:33:40,559 --> 00:33:43,644
are when an activity gets received in a
device

539
00:33:44,409 --> 00:33:48,130
um to pick the application that we wanna
show

540
00:33:48,013 --> 00:33:54,044
to the user and so in that sense it's a
lot like a file type extension

541
00:33:54,044 --> 00:33:58,072
you know files have extensions in those
extensions bind them to particular

542
00:33:58,072 --> 00:34:01,251
documents when I double clicked on or
otherwise opened

543
00:34:01,899 --> 00:34:05,936
our user to type string to the same
thing are you make the mop

544
00:34:06,269 --> 00:34:10,800
we don't display them to users so they
don't need to be terribly comprehensible

545
00:34:10,008 --> 00:34:13,011
and we recommend that you

546
00:34:14,001 --> 00:34:19,053
start with the basic your developer I D
or your company's reverse DNS name

547
00:34:19,062 --> 00:34:22,063
and then add some suffix to the end to
that

548
00:34:22,072 --> 00:34:26,271
to make it unique one for each extension
pipe that you have

549
00:34:26,919 --> 00:34:30,190
and then once you picked those I you put
them in your code

550
00:34:30,019 --> 00:34:33,248
at the point you be creating each of
those types of activities

551
00:34:33,419 --> 00:34:36,960
and you put them in your info pls so
that we know

552
00:34:36,096 --> 00:34:39,194
that your application would like to
handle these types of activities

553
00:34:40,094 --> 00:34:43,313
are in your info pls to go on one of two
places

554
00:34:44,159 --> 00:34:47,236
other either go in the CF want all
document types array

555
00:34:47,929 --> 00:34:50,945
as the NS ubiquitous document

556
00:34:51,089 --> 00:34:56,510
act user activity type are or they go as
a string in the NS user activity types

557
00:34:56,051 --> 00:34:56,122
at the top

558
00:34:57,022 --> 00:35:01,063
up your applications and populist

559
00:35:01,063 --> 00:35:04,125
I'm we've talked about how their

560
00:35:05,025 --> 00:35:08,051
used to pick the application that shown
in the corner

561
00:35:08,051 --> 00:35:13,066
we allow all the applications from a
single developer to exchange activities

562
00:35:13,066 --> 00:35:14,735
amongst themselves

563
00:35:15,329 --> 00:35:19,700
come so if you have a and I was
application

564
00:35:19,007 --> 00:35:23,396
an OS X application I you can exchange
activities between them

565
00:35:24,089 --> 00:35:28,250
if you have several Iowa sects i several
I was applications

566
00:35:28,025 --> 00:35:31,072
each of your applications could create
activities that were continue bow in

567
00:35:31,072 --> 00:35:31,097
your

568
00:35:31,095 --> 00:35:35,131
other hi Wes for OS X applications

569
00:35:36,031 --> 00:35:39,049
we do this based on that team identify
our that

570
00:35:39,049 --> 00:35:42,120
used in the way you've built replication
that means

571
00:35:43,002 --> 00:35:46,023
in order to use continuity to continue
an item

572
00:35:46,041 --> 00:35:49,073
are where they need to be an application
in the App Store

573
00:35:49,073 --> 00:35:52,170
or you need to be signed the developer
certificate

574
00:35:53,007 --> 00:35:56,636
um now applications don't have to claim

575
00:35:57,329 --> 00:36:01,640
all the activity types they create I am
a corollary

576
00:36:01,064 --> 00:36:04,145
applications can claim activity types

577
00:36:05,045 --> 00:36:08,142
that they themselves don't create and as
example

578
00:36:09,042 --> 00:36:13,063
I if you have kind of a monolithic
application on a West Ham

579
00:36:13,063 --> 00:36:16,069
I say it's an application that creates
many different types of things for the

580
00:36:17,023 --> 00:36:17,118
user

581
00:36:18,018 --> 00:36:22,051
from the user's perspective I the user
can edit pictures of cats

582
00:36:22,051 --> 00:36:26,051
the users can add cute videos about cats

583
00:36:26,051 --> 00:36:31,068
users can keep all of their cat books or
all other pictures up their captain

584
00:36:31,068 --> 00:36:32,977
there one application

585
00:36:33,589 --> 00:36:38,280
arm you have that application he would
have a bunch of different document types

586
00:36:38,028 --> 00:36:39,073
when you're creating

587
00:36:39,073 --> 00:36:43,128
activities you know there are different
activities a user might be doing

588
00:36:44,028 --> 00:36:47,035
I'm but I O S you might have three
separate applications

589
00:36:47,098 --> 00:36:50,197
might have one application with the user
who looks at their

590
00:36:51,079 --> 00:36:54,950
cat movies or plays their cat sounds
might have a different application for

591
00:36:54,095 --> 00:36:55,139
their cat books

592
00:36:56,039 --> 00:36:59,978
may have a third application where they
can see their cute cat pictures

593
00:37:00,329 --> 00:37:05,430
with a cute cat captions my mother I own
when you build peace your applications

594
00:37:05,043 --> 00:37:05,952
this way

595
00:37:06,339 --> 00:37:10,390
you would create four different activity
types won the kind of map to beach in

596
00:37:10,849 --> 00:37:12,170
your file types

597
00:37:12,017 --> 00:37:16,041
and then your I was application in this
case one every applications would claim

598
00:37:16,041 --> 00:37:17,069
two types

599
00:37:17,069 --> 00:37:21,198
and your other applications would claim
other types and if you use our continued

600
00:37:21,819 --> 00:37:23,845
from a West End I O S

601
00:37:24,079 --> 00:37:27,960
the appropriate I can watch on a corner
when they want to continue from IRS back

602
00:37:27,096 --> 00:37:28,101
to western

603
00:37:29,001 --> 00:37:33,840
would all come back to your say
monolithic application

604
00:37:33,849 --> 00:37:37,980
arm likewise we've talked about the NS
user activity object

605
00:37:37,098 --> 00:37:40,227
and it actually doesn't have a lot that
you need to set a net

606
00:37:41,109 --> 00:37:44,210
I'm activities have a title which you
can set

607
00:37:44,021 --> 00:37:48,113
keep it short I just in case I get shown
to the user to know what they're doing

608
00:37:49,013 --> 00:37:52,212
are they also have this user info
dictionary that

609
00:37:52,329 --> 00:37:56,920
I anything you said in their arm the
machine that creates an activity

610
00:37:56,092 --> 00:37:59,098
is gonna show up in there on the machine
that receives it I with minimal

611
00:38:00,052 --> 00:38:01,059
translation only I love

612
00:38:02,022 --> 00:38:06,051
URL's to point objects that are in cloud

613
00:38:06,051 --> 00:38:10,140
containers to the same logical object:

614
00:38:10,599 --> 00:38:14,601
on the receiving device arm we do have
the

615
00:38:14,619 --> 00:38:18,500
add user activity entries from
dictionary to efficiently merge

616
00:38:18,005 --> 00:38:21,093
are some additional information to the
dictionary if you just set the user info

617
00:38:22,038 --> 00:38:25,120
then you're saying this is exactly the
user info I want to be there

618
00:38:26,002 --> 00:38:29,371
after you created an activity in are you
or

619
00:38:29,569 --> 00:38:34,190
ap getting you like it will call become
current on it system then knows this is

620
00:38:34,019 --> 00:38:36,075
the activity that we should be sending
out

621
00:38:36,075 --> 00:38:39,079
that a user could continue another
device if

622
00:38:39,079 --> 00:38:42,148
your application was the application
that

623
00:38:42,859 --> 00:38:47,180
the user was using at that point I'm I
and the far future you would call

624
00:38:47,018 --> 00:38:51,041
activity invalidate to say we are done
with this activity the user

625
00:38:51,041 --> 00:38:54,106
as close the document or its no longer
appropriate you'll get removed from

626
00:38:55,006 --> 00:38:56,053
other devices

627
00:38:56,053 --> 00:38:59,121
and then you just the outer

628
00:39:00,021 --> 00:39:03,890
there are a few delegate calls as well
that you can take advantage of

629
00:39:04,079 --> 00:39:07,650
so if you set a delegate on issues right
to the object

630
00:39:07,065 --> 00:39:13,069
are when we've decided that we need the
information from your activity object

631
00:39:13,069 --> 00:39:16,140
if you have implemented user activity
will say we will call

632
00:39:17,004 --> 00:39:22,086
that delegate on at fault priority queue
to give you one last chance

633
00:39:23,022 --> 00:39:26,131
to fill in the user info with whatever

634
00:39:26,329 --> 00:39:30,640
you think is the correct info right now
arm and that means the

635
00:39:30,064 --> 00:39:35,493
the model you should adopt is instead of
constantly trying to set user info

636
00:39:36,069 --> 00:39:40,640
you know after every keystroke if the
user is typing something on one device

637
00:39:40,064 --> 00:39:44,092
I you should set the needs save property
abuser activity

638
00:39:44,092 --> 00:39:48,097
whenever the user does anything that
would essentially dirty the object from

639
00:39:48,097 --> 00:39:50,120
the last time you told us

640
00:39:51,002 --> 00:39:55,081
that here's an activity and the last
time we ask you to fill it in

641
00:39:55,099 --> 00:39:58,102
and at some time in the future we will
call you

642
00:39:59,029 --> 00:40:04,858
via this user activity will save or in
the UI kit an app get delegates about us

643
00:40:05,119 --> 00:40:09,690
and we'll ask you okay now we actually
need the information for this activity

644
00:40:09,069 --> 00:40:12,091
perhaps it's being sent another device
because the user's actually continuing

645
00:40:12,091 --> 00:40:12,099
ed

646
00:40:13,071 --> 00:40:17,074
arm there are other reasons that we
sometimes ask you to give us the info

647
00:40:17,074 --> 00:40:20,433
and that's your opportunity feeling the
user info

648
00:40:21,099 --> 00:40:27,150
I and when that returns we know that you
given us a consistent set of information

649
00:40:27,609 --> 00:40:32,660
I we have another delegate which lets
you know that the activity was continued

650
00:40:32,066 --> 00:40:33,104
on to another device

651
00:40:34,004 --> 00:40:37,068
arm when the user does this we will call

652
00:40:37,068 --> 00:40:40,467
on the first device user activity was
continued

653
00:40:41,079 --> 00:40:44,480
give you back your user to the object
arm

654
00:40:44,048 --> 00:40:47,907
many view probably won't need us are
hoping that you structure your

655
00:40:48,339 --> 00:40:49,720
activities

656
00:40:49,072 --> 00:40:52,911
so that even if they are continued on to
a second device

657
00:40:53,559 --> 00:40:56,740
that they remain perfectly fine I first
device

658
00:40:56,074 --> 00:41:00,091
user might pick it back up in a few
seconds and keep using it there

659
00:41:00,091 --> 00:41:03,124
but if you have an activity this
transaction with nature

660
00:41:04,024 --> 00:41:09,133
that's really only exist at one place at
the user's filling out a form

661
00:41:09,349 --> 00:41:13,190
as an example and arm our current lease

662
00:41:13,019 --> 00:41:17,080
if you're composing a draft message when
you continue draft message to a second

663
00:41:17,008 --> 00:41:17,106
device

664
00:41:18,078 --> 00:41:21,084
back in the first to voicemail clothes
that draft message

665
00:41:22,038 --> 00:41:26,126
because male doesn't want the user to
have to draft messages into devices

666
00:41:27,026 --> 00:41:30,119
not know which one is more recent I'm so
if you do have one of these

667
00:41:31,019 --> 00:41:33,047
transactional kinda activities

668
00:41:33,047 --> 00:41:36,100
you can take advantage %uh user activity
was continued

669
00:41:37,000 --> 00:41:41,859
I and to do whatever you need to do
there for that

670
00:41:41,859 --> 00:41:44,910
I'm not jury talked about are website

671
00:41:44,091 --> 00:41:49,148
hand-off um what's ahead of is the
ability for you as developers

672
00:41:50,048 --> 00:41:53,102
to in your native applications if

673
00:41:54,002 --> 00:41:57,044
you have the kinda application where

674
00:41:57,044 --> 00:42:00,423
you're kinda really backing data that's
provided elsewhere it's not

675
00:42:00,819 --> 00:42:03,873
sitting if I like loud arm

676
00:42:04,359 --> 00:42:08,359
you know perhaps at some time no for
social browser application

677
00:42:08,359 --> 00:42:12,010
where you have a lovely iowa's
application

678
00:42:12,001 --> 00:42:15,005
presents a great interface that takes
advantage of the features in the device

679
00:42:15,041 --> 00:42:17,440
like the camera on the touch screen

680
00:42:17,809 --> 00:42:22,400
art write a very high quality interface
to let people do things

681
00:42:22,004 --> 00:42:25,013
are but your course also have a website

682
00:42:25,049 --> 00:42:28,120
that other users can go to I'm to come
see the same thing

683
00:42:29,002 --> 00:42:34,007
or to interact with your met application
in the same way

684
00:42:34,025 --> 00:42:38,030
um your native application can tell us

685
00:42:38,003 --> 00:42:41,097
that if our User another platform

686
00:42:42,024 --> 00:42:46,093
doesn't have an application which claims
the activity type that we're creating

687
00:42:46,093 --> 00:42:50,012
the user could also choose to continue
this activity in a browser on that

688
00:42:50,849 --> 00:42:51,871
platform

689
00:42:52,069 --> 00:42:56,144
I know is here Hooper upper second
device in the corner we seen Safari

690
00:42:56,819 --> 00:43:00,410
and if the user clicks on safari they
would get brought

691
00:43:00,041 --> 00:43:03,102
to I a URL that you provided

692
00:43:04,002 --> 00:43:07,075
back on the originating device I am from
that

693
00:43:07,075 --> 00:43:10,934
you know hopefully the user is able to
continue what they were doing in your

694
00:43:11,609 --> 00:43:13,630
native application

695
00:43:13,819 --> 00:43:16,970
I have to take a quick look at what that
looks like

696
00:43:16,097 --> 00:43:19,193
you know you would create an activity
just as we've seen elsewhere

697
00:43:20,093 --> 00:43:24,122
you would fill in the user info so that
if it is continued to another native

698
00:43:25,022 --> 00:43:25,121
application

699
00:43:26,021 --> 00:43:29,038
yours on a second device you get a high

700
00:43:29,038 --> 00:43:32,039
fidelity full pass through

701
00:43:32,048 --> 00:43:35,139
and you're also set this additional
field web page URL

702
00:43:36,039 --> 00:43:39,128
you'd say here's an HTTP or HTTPS URL

703
00:43:40,028 --> 00:43:43,071
if the years ago was there I that's also
OK

704
00:43:43,071 --> 00:43:46,129
and that will get them to what they need

705
00:43:47,029 --> 00:43:51,068
I similarly we can do the same type of
thing

706
00:43:51,068 --> 00:43:55,068
out to allow a user in a browser or

707
00:43:55,068 --> 00:43:59,069
not to continue into a native
application and iowa's

708
00:43:59,069 --> 00:44:02,072
arm and you know what that would look
like

709
00:44:02,099 --> 00:44:05,172
is if the user was at your website

710
00:44:06,072 --> 00:44:09,076
um say on desktop using

711
00:44:09,076 --> 00:44:13,088
I the information there when they pulled
out her I was device

712
00:44:13,088 --> 00:44:16,547
in the corner they would see the icon
for your native application

713
00:44:17,339 --> 00:44:20,436
and if they clicked on that know they
would get brought into your native

714
00:44:21,309 --> 00:44:22,530
application

715
00:44:22,053 --> 00:44:25,104
and you could restore them in your
native application to

716
00:44:26,004 --> 00:44:29,045
the same thing they would have been
seeing in the web browser on the

717
00:44:29,045 --> 00:44:30,122
originating device

718
00:44:31,022 --> 00:44:34,076
now to do this you take advantage I'll

719
00:44:34,076 --> 00:44:37,103
some new API's that happens providing an
IRS

720
00:44:38,003 --> 00:44:41,042
out that allow you to securely kinda
claim

721
00:44:41,042 --> 00:44:45,241
a domain name for your application so
that you can say I'm

722
00:44:45,619 --> 00:44:49,640
this developer I truly on these domain
names and I'm willing to let these

723
00:44:49,829 --> 00:44:51,390
applications

724
00:44:51,039 --> 00:44:54,238
take advantage of that domain name

725
00:44:54,589 --> 00:44:57,661
I and the way you do that is you add
these domain names

726
00:44:58,309 --> 00:45:02,680
to the comparable but developer dot
Associated domains

727
00:45:02,068 --> 00:45:06,166
entitlement on your application and once
you've done that

728
00:45:07,066 --> 00:45:10,113
some code will reach out

729
00:45:11,013 --> 00:45:14,051
to your website periodically from

730
00:45:14,051 --> 00:45:18,098
the device and after to verify that
there are some information there will

731
00:45:18,098 --> 00:45:20,103
say this application is allowed

732
00:45:21,048 --> 00:45:25,093
to continue from this domain if another
device gave it to us

733
00:45:25,093 --> 00:45:28,772
and if that happens you know we bring up
your application

734
00:45:29,609 --> 00:45:33,210
I in your native application you know
again

735
00:45:33,021 --> 00:45:37,102
your continue user activity restoration
handler is going to call

736
00:45:38,002 --> 00:45:42,591
and there were you do is you check the
incoming activity type to see if it was

737
00:45:42,609 --> 00:45:47,200
this special and ask user activity type
continuing from web browser

738
00:45:47,002 --> 00:45:50,059
I never was you know there is any user
info there

739
00:45:50,077 --> 00:45:53,173
you can take advantage of because you
don't have native code running and other

740
00:45:54,073 --> 00:45:54,692
side

741
00:45:55,349 --> 00:46:00,430
it's running a web browser you do have
the webpage URL that the user was askin

742
00:46:00,043 --> 00:46:01,192
that browser

743
00:46:01,579 --> 00:46:05,630
and from that web page URL you could
bring your native app pop

744
00:46:06,089 --> 00:46:09,114
kinda looking at that same thing hi

745
00:46:09,339 --> 00:46:12,437
you also of course would continue to get
any other user activity types that your

746
00:46:13,319 --> 00:46:14,324
application has claimed

747
00:46:14,819 --> 00:46:19,450
so if it's any of those who do the same
thing you saw earlier

748
00:46:19,045 --> 00:46:22,098
I lastly let's talk about continuation
streams

749
00:46:22,098 --> 00:46:26,677
continuation streams our way are for you
to get

750
00:46:27,559 --> 00:46:31,240
and set up after user has chosen to
resume

751
00:46:31,024 --> 00:46:34,077
an activity in a second device are a bi
directional pair

752
00:46:34,077 --> 00:46:38,136
input streams between the two devices
the you can use

753
00:46:38,829 --> 00:46:41,829
are primarily we think for interactive
purposes

754
00:46:41,829 --> 00:46:45,300
if the user is going to continue to use
both devices you wanna

755
00:46:45,003 --> 00:46:48,762
be able to throw things back and forth
very quickly

756
00:46:49,059 --> 00:46:53,113
home on what that looks like you know is
the user's

757
00:46:53,599 --> 00:46:57,674
in your native application on your first
device and we see your icon the corner

758
00:46:58,349 --> 00:47:02,890
and the user swipes up and we bring up
your application

759
00:47:02,089 --> 00:47:07,093
and then we setup a Senate and House
streams between the two processors

760
00:47:08,029 --> 00:47:11,115
and once those are up you're free to
read and write from those streams

761
00:47:12,015 --> 00:47:15,040
and communicate between the two devices
any

762
00:47:15,004 --> 00:47:18,043
fairly hi performance manner

763
00:47:18,079 --> 00:47:22,118
for whatever purpose is you want to do
on what that looks like in the code

764
00:47:22,829 --> 00:47:25,853
again as you create and this user
activity I

765
00:47:26,069 --> 00:47:29,073
you said a delegate and then you said
set this

766
00:47:29,109 --> 00:47:32,690
supports continuation strange property
to yes

767
00:47:32,069 --> 00:47:36,088
on the make a current and on the
receiving device

768
00:47:36,088 --> 00:47:39,527
I when the activity comes in arm in

769
00:47:40,319 --> 00:47:44,372
continues our activity restoration
hambre are you check if that activity

770
00:47:44,849 --> 00:47:47,220
supports continuation streams

771
00:47:47,022 --> 00:47:50,065
I never does I you know you can call
this

772
00:47:50,065 --> 00:47:54,484
additional method get continuation
streams with completion handler

773
00:47:55,069 --> 00:47:58,094
and that gets past the block

774
00:47:58,319 --> 00:48:01,480
and we when you call that will reach
back

775
00:48:01,048 --> 00:48:04,122
try to set up these pair streams to the
original device

776
00:48:05,022 --> 00:48:08,891
and after their up will call your
completion handler with the streams

777
00:48:09,089 --> 00:48:12,780
up something goes wrong I'll call you
with and and Essar

778
00:48:12,078 --> 00:48:15,397
so if you don't get an error you have
streams you can start reading and

779
00:48:16,099 --> 00:48:16,910
writing

780
00:48:16,091 --> 00:48:19,178
back and forth between the two hours I'm
simultaneously

781
00:48:20,078 --> 00:48:23,167
back in the first device um

782
00:48:23,869 --> 00:48:27,290
the delegate method that you said the
delegate method

783
00:48:27,029 --> 00:48:30,050
I love the delegate you set earlier is
going to get the did

784
00:48:30,005 --> 00:48:33,114
receive InputStream OutputStream call

785
00:48:33,609 --> 00:48:37,290
over there that's going to get the input
stream in the OutputStream

786
00:48:37,029 --> 00:48:40,064
that are connected to your client and
your

787
00:48:40,064 --> 00:48:45,103
free to start reading and writing back
and forth between the two

788
00:48:46,003 --> 00:48:52,552
I sold

789
00:48:52,579 --> 00:48:56,270
are so wrapping up you learned about the
app getting you like it

790
00:48:56,027 --> 00:49:00,044
I it's very extensive it does almost
everything you need

791
00:49:00,044 --> 00:49:03,070
I am and particular you learn but an ass

792
00:49:03,007 --> 00:49:07,015
and you I document support which makes
it almost

793
00:49:07,078 --> 00:49:11,096
completely free to implement this are
many have you can add about four lines

794
00:49:11,096 --> 00:49:12,175
of code to your application

795
00:49:13,075 --> 00:49:16,097
and you'll discover that it starts
continuing between

796
00:49:16,097 --> 00:49:19,128
I less device I was device or if you
have

797
00:49:20,028 --> 00:49:23,095
I less analyst and applications from
Iowa stars10

798
00:49:23,095 --> 00:49:26,234
our meal by adding a couple keys to
infer P list

799
00:49:27,089 --> 00:49:30,400
I and making sure that you're putting
your documents and I clout

800
00:49:30,004 --> 00:49:33,027
are you learn about continuation streams
we have if you want to set up

801
00:49:33,063 --> 00:49:34,125
interactive

802
00:49:35,025 --> 00:49:38,089
in a real time ish performance between
devices after the user chooses to

803
00:49:38,089 --> 00:49:39,095
continue

804
00:49:39,095 --> 00:49:42,694
are you also learned about how you can
continue to a website or continue from a

805
00:49:43,549 --> 00:49:44,220
website

806
00:49:44,022 --> 00:49:47,025
into your native applications

807
00:49:47,025 --> 00:49:50,084
of for more information our framework
evangelist

808
00:49:50,309 --> 00:49:54,365
I'm not sure if he's here but it's Jake
barons there's his email address

809
00:49:54,869 --> 00:49:57,912
are we have a very good programming
guide that out

810
00:49:58,299 --> 00:50:01,960
and available on developer Apple com the
hand of programming guide

811
00:50:01,096 --> 00:50:05,153
which we hope answers any questions that
you didn't get answer today and has

812
00:50:06,053 --> 00:50:10,075
some examples of how you might do things
I would have the Apple developer forums

813
00:50:10,075 --> 00:50:15,134
where we're sure new and other Apple
employees are going to start

814
00:50:15,809 --> 00:50:19,890
helping each other I take advantage of
this

815
00:50:19,089 --> 00:50:22,114
are in terms related sessions our
tomorrow morning there's a section on

816
00:50:23,014 --> 00:50:24,193
Cloud documents

817
00:50:24,319 --> 00:50:27,980
on as we said cloud documents are a
great way

818
00:50:27,098 --> 00:50:30,217
to get the the actual data

819
00:50:31,099 --> 00:50:35,290
behind user activities I sink through
the clouds so that when the activity

820
00:50:35,029 --> 00:50:37,100
goes from one device to the device the
data

821
00:50:38,000 --> 00:50:41,074
is available for it arm there's also the
session yesterday

822
00:50:41,074 --> 00:50:44,693
which you can watch your app your
website in Safari

823
00:50:45,359 --> 00:50:49,250
which top structured web credentials and
how you can lot

824
00:50:49,025 --> 00:50:53,604
I was devices know the you have the
right to do things with domains

825
00:50:53,829 --> 00:50:55,770
and thank you all for coming hope your
good afternoon

