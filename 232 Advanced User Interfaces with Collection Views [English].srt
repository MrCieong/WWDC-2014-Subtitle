1
00:00:12,009 --> 00:00:15,045
so good afternoon everybody my name is
Jeff Watkins

2
00:00:15,369 --> 00:00:17,050
I'm in Iowa saw

3
00:00:17,005 --> 00:00:20,074
near I'm on the iTunes team and I have

4
00:00:20,119 --> 00:00:23,880
pleasure talking to a little bit about
advanced user interfaces with collection

5
00:00:23,088 --> 00:00:23,377
view

6
00:00:24,169 --> 00:00:28,570
recently we got some brand new designs

7
00:00:28,057 --> 00:00:31,121
for iTunes Connect and

8
00:00:32,021 --> 00:00:35,103
these were welcome new designs for

9
00:00:36,003 --> 00:00:39,102
I was 7 look and feel and

10
00:00:39,129 --> 00:00:42,800
they were really fantastic they were
brand new fresh clean

11
00:00:42,008 --> 00:00:45,040
I look and feel and they gave us

12
00:00:46,012 --> 00:00:49,039
a great opportunity because we haven't
making

13
00:00:49,039 --> 00:00:52,638
decisions for our code since I west to

14
00:00:52,989 --> 00:00:56,071
and as you can imagine

15
00:00:56,809 --> 00:01:01,848
the decisions that we made. back and I
was too we're really not the same

16
00:01:02,199 --> 00:01:03,030
decisions

17
00:01:03,003 --> 00:01:08,031
that we would be making today so this
was an ideal opportunity for us

18
00:01:08,031 --> 00:01:12,052
to take some time and pay off some
technical debt

19
00:01:12,052 --> 00:01:15,107
now we all know that that's fancy speak
for

20
00:01:16,007 --> 00:01:19,038
throw away the old code and write some
shiny new code

21
00:01:19,038 --> 00:01:23,637
but the reality is we really wanted to
build

22
00:01:23,979 --> 00:01:27,250
really great modern architecture

23
00:01:27,025 --> 00:01:31,174
that would take us forward a few more
releases you know

24
00:01:31,399 --> 00:01:35,110
everybody thinks that they're gonna
build this shiny

25
00:01:35,011 --> 00:01:39,011
glittering drool architecture that's
gonna last for ever

26
00:01:39,011 --> 00:01:42,720
but the reality is you get to maybe
three releases

27
00:01:42,819 --> 00:01:45,940
have anything to build and then it's
time to rethink things

28
00:01:45,094 --> 00:01:49,613
but this was our opportunity so

29
00:01:50,459 --> 00:01:55,780
I'm really excited to announce that we
have some sample code that goes along

30
00:01:55,078 --> 00:01:56,078
with this

31
00:01:56,078 --> 00:01:59,197
talk but what makes the sample code

32
00:01:59,899 --> 00:02:03,890
even more interesting is this sample
code is distilled

33
00:02:03,089 --> 00:02:06,116
down from the actual source code
Abidjan's connect

34
00:02:07,016 --> 00:02:11,052
I have my manager and his chain
management to thank for this

35
00:02:11,052 --> 00:02:15,119
because this is kind of unusual normally
sample code is something that you

36
00:02:16,019 --> 00:02:19,318
just sort of work together after your
talk

37
00:02:19,489 --> 00:02:23,030
and it covers the aspects that you're
talking about

38
00:02:23,003 --> 00:02:26,047
but it you know it becomes the bear
minimum

39
00:02:26,047 --> 00:02:29,096
this actually is full rich

40
00:02:29,096 --> 00:02:32,112
data sources full rich

41
00:02:33,012 --> 00:02:36,019
you I collection delay I'll I and
there's actually way more in there that

42
00:02:36,082 --> 00:02:37,104
we're going to talk about today

43
00:02:38,004 --> 00:02:45,004
close

44
00:02:45,022 --> 00:02:49,023
I'm sure there are bugs I

45
00:02:49,023 --> 00:02:53,045
but more importantly we'll be building
on it

46
00:02:53,045 --> 00:02:57,052
and improving as time goes on so look
for all sorts of additions to this

47
00:02:58,015 --> 00:03:02,073
a simple code as time goes on so we had
some requirements

48
00:03:02,073 --> 00:03:05,136
just like you all probably get
requirements with your applications and

49
00:03:06,036 --> 00:03:07,084
I'd like to go through those

50
00:03:07,084 --> 00:03:12,086
one by one and take a look at them and
give you a little bit

51
00:03:13,004 --> 00:03:16,015
are a sense up where we were coming from

52
00:03:16,015 --> 00:03:19,040
and you a little bit a sense that the
tear

53
00:03:19,004 --> 00:03:22,045
that I felt I'll when I took a look at
them

54
00:03:22,081 --> 00:03:26,093
so first the ball we had really complex
data

55
00:03:26,093 --> 00:03:29,622
we started off with iTunes Connect

56
00:03:30,459 --> 00:03:34,800
to supporting aP's and books and that
was great

57
00:03:34,008 --> 00:03:37,073
but now we're gonna support all the
content types

58
00:03:38,045 --> 00:03:41,108
the store that the store supports so we
were gonna add

59
00:03:42,008 --> 00:03:45,054
music God music

60
00:03:45,054 --> 00:03:49,142
as well as movies and TV seasons

61
00:03:50,042 --> 00:03:53,119
now that

62
00:03:54,019 --> 00:03:57,178
was going to pose a significant
challenge for us

63
00:03:57,349 --> 00:04:02,000
because each one of these content types
as you can see has multiple sections

64
00:04:02,000 --> 00:04:05,005
multiple different I'm

65
00:04:05,005 --> 00:04:09,027
tabs within their we're talking about an
awful lot of data that's going to be

66
00:04:09,027 --> 00:04:14,061
a real difficult time to manage on top
of that

67
00:04:14,061 --> 00:04:17,690
really want to have a single loading
indicator

68
00:04:18,239 --> 00:04:22,130
one of the things i think is really
tremendously important

69
00:04:22,013 --> 00:04:26,025
is that users no when the content is
available

70
00:04:26,025 --> 00:04:29,052
and ready for interaction I really don't
like it

71
00:04:29,052 --> 00:04:32,421
one application has a spinner here
spinner their

72
00:04:32,889 --> 00:04:35,903
I don't really know if it's ready for me

73
00:04:36,029 --> 00:04:39,650
someone to make iTunes Connect really
clear

74
00:04:39,065 --> 00:04:42,474
that when the speaker was gone we're
ready for you

75
00:04:43,059 --> 00:04:46,370
so we're not have our spinner

76
00:04:46,037 --> 00:04:50,606
their spinners gonna go away and there
was the content

77
00:04:50,939 --> 00:04:55,001
now most of our designs looked like you
I tableview

78
00:04:55,559 --> 00:04:58,657
and this was easy we could have done
this in our sleep

79
00:04:59,539 --> 00:05:02,590
but it got more interesting on ipad

80
00:05:02,059 --> 00:05:05,878
because we have needed to support
multiple columns

81
00:05:06,409 --> 00:05:10,416
now we could have packed together a
solution for iPad

82
00:05:10,479 --> 00:05:13,545
but that didn't feel right right here
we're trying to create

83
00:05:14,139 --> 00:05:17,214
a future looking modern architecture

84
00:05:17,889 --> 00:05:20,928
we should consider consider hacks

85
00:05:21,279 --> 00:05:24,358
so we really needed to do something more
sophisticated

86
00:05:25,069 --> 00:05:28,160
for iPad and that's when I started
thinking let's take a look at collection

87
00:05:28,979 --> 00:05:30,981
you

88
00:05:30,999 --> 00:05:34,003
well if you know collection view

89
00:05:34,039 --> 00:05:38,039
you know there's some limitations with
the standard flow layout

90
00:05:38,039 --> 00:05:42,057
specifically it doesn't really support
global hatter's

91
00:05:42,219 --> 00:05:46,228
like you haven't able to: right and we
needed to support global hatter's we

92
00:05:46,309 --> 00:05:47,382
needed people have this one header

93
00:05:48,039 --> 00:05:52,990
that stuck around as you tapped through
your content

94
00:05:52,099 --> 00:05:56,115
so that made me start thinking me we
have to do something here

95
00:05:57,015 --> 00:06:01,049
and I might wind up having to write my
own layout

96
00:06:01,049 --> 00:06:04,090
in addition we also needed to support

97
00:06:04,009 --> 00:06:08,248
pin headers so as we're schooling
through our content

98
00:06:09,139 --> 00:06:12,214
it was really important that we able
we'd be able to get

99
00:06:12,889 --> 00:06:15,898
at those segment two controls so that we
could get

100
00:06:16,789 --> 00:06:19,822
to the different sections of our content

101
00:06:20,119 --> 00:06:23,183
so we needed people support pin headers
and flow layout also doesn't

102
00:06:23,759 --> 00:06:26,786
really support that either so

103
00:06:27,029 --> 00:06:32,050
that kinda put the mail in the coffin of
I've using flow layout for us

104
00:06:32,005 --> 00:06:35,524
and that man we're gonna have to do I'll

105
00:06:35,569 --> 00:06:40,622
I'll a collection be layout which I
gotta admit was pretty exciting

106
00:06:41,099 --> 00:06:44,114
I also wanted to add swipe to at

107
00:06:44,249 --> 00:06:47,255
this was a new feature in Iowa 7 I
thought it would be a great addition to

108
00:06:47,849 --> 00:06:48,710
iTunes Connect

109
00:06:48,071 --> 00:06:52,074
because it gives it that modern I
interactive feel

110
00:06:52,074 --> 00:06:57,153
and users can swipe to the tax code from
their loss to favorites

111
00:06:57,819 --> 00:07:00,837
and

112
00:07:00,999 --> 00:07:05,360
Nevada

113
00:07:05,036 --> 00:07:08,045
also you know if you've got a list the
favorites

114
00:07:08,369 --> 00:07:10,461
you're gonna want to be able to edit
those so we want to support batch

115
00:07:11,289 --> 00:07:11,388
editing

116
00:07:12,279 --> 00:07:19,279
and likewise into the tax code

117
00:07:19,649 --> 00:07:24,110
now favorites wouldn't be any good right
if you couldn't

118
00:07:24,011 --> 00:07:27,880
manipulate them if you couldn't re water
your favorites because

119
00:07:27,979 --> 00:07:30,991
because I have a drag if you got a lot
of favorites and

120
00:07:31,099 --> 00:07:35,103
they're in the wrong order so want to
sport drag reordering as well

121
00:07:35,499 --> 00:07:39,531
and we need to support that with a
custom layout and I was going to be a

122
00:07:39,819 --> 00:07:40,877
bit of a challenge

123
00:07:41,399 --> 00:07:43,473
but I feel like I've been slacking on
Xcode summer put it back at the top

124
00:07:44,139 --> 00:07:44,204
other

125
00:07:44,789 --> 00:07:47,841
the list favorites because they really
have

126
00:07:48,309 --> 00:07:51,316
it at a park

127
00:07:51,379 --> 00:07:55,520
tomorrow I'm

128
00:07:55,052 --> 00:07:56,078
K

129
00:07:56,078 --> 00:07:58,155
with with swift and all the other stuff
they've been doing

130
00:07:59,055 --> 00:08:04,083
those guys so so those were our
requirements

131
00:08:04,083 --> 00:08:07,121
and those those kinda law

132
00:08:08,021 --> 00:08:11,105
I mean on top of all the other stuff
that the rest of the guys had to do on

133
00:08:12,005 --> 00:08:16,009
but i wanna talk about the first one
first because without

134
00:08:16,009 --> 00:08:19,017
data right iTunes Connect is nothing

135
00:08:19,017 --> 00:08:22,094
it would just be some pretty pictures /a
I've your caps and everything else

136
00:08:22,094 --> 00:08:25,113
which are nice but nobody's gonna want
to look at

137
00:08:26,013 --> 00:08:29,050
that you know lines and and

138
00:08:29,005 --> 00:08:33,071
pretty pictures so getting the data
right is the most important thing

139
00:08:34,016 --> 00:08:38,022
and quite frankly was the thing that I
was really really calm convoluted Lee

140
00:08:38,022 --> 00:08:41,109
freaked out about because 5d a types and

141
00:08:42,009 --> 00:08:45,071
all these different sections and whole
my goodness so

142
00:08:45,071 --> 00:08:49,118
I really needed come up with some way to
minimize the complexity of all that data

143
00:08:50,018 --> 00:08:53,089
and the way I took

144
00:08:53,089 --> 00:08:56,115
a look at this as I took all the designs

145
00:08:57,015 --> 00:09:00,100
that rahi guys and gals in fact mostly
Italian

146
00:09:01,000 --> 00:09:05,075
to come up with and we laid them out I
kinda squinted 'em

147
00:09:05,075 --> 00:09:08,081
adamantly about side by side and I
realized

148
00:09:08,081 --> 00:09:11,114
that there were some real similarities
here right

149
00:09:12,014 --> 00:09:15,046
diffuse if you squint that these you
realize that we've got some

150
00:09:15,046 --> 00:09:18,051
key-value stuff going on here and

151
00:09:18,096 --> 00:09:22,098
that in particular showed up all
throughout the application we've also

152
00:09:23,016 --> 00:09:23,110
got this

153
00:09:24,001 --> 00:09:27,029
status section that shows up frequently

154
00:09:27,038 --> 00:09:31,040
we've got lots of sections in our
layouts

155
00:09:31,004 --> 00:09:36,005
that seem to reappear all over the place
I thought to myself gosh

156
00:09:36,005 --> 00:09:40,039
this is really something that we need to
take advantage of you really need to be

157
00:09:40,084 --> 00:09:41,117
able to reuse

158
00:09:42,017 --> 00:09:46,019
this kind of code but the problem is

159
00:09:46,019 --> 00:09:49,025
if you've been doing collection view

160
00:09:49,079 --> 00:09:52,108
controllers in the past you know that
there's really

161
00:09:53,008 --> 00:09:56,016
challengers with code reuse when it
comes to

162
00:09:56,016 --> 00:10:00,110
data sources the traditional approach

163
00:10:01,001 --> 00:10:04,010
to a collection a few data source has
you putting

164
00:10:05,000 --> 00:10:08,038
everything in the view controller and as
a result

165
00:10:08,038 --> 00:10:11,055
you wind up with one of two things first

166
00:10:11,055 --> 00:10:14,093
you can wind up with a gigantic view
controller and

167
00:10:14,093 --> 00:10:20,100
I'm sure you've all seen this not on
your projects but you want to put the

168
00:10:21,000 --> 00:10:22,016
view controller that's like

169
00:10:22,016 --> 00:10:25,094
five thousand lines of code and it does

170
00:10:25,094 --> 00:10:29,131
everything I'm including things that you
don't do anymore

171
00:10:30,031 --> 00:10:34,033
i deleted all that code and

172
00:10:34,051 --> 00:10:38,144
so wouldn't want that especially nothing
we're starting fresh right we wouldn't

173
00:10:39,044 --> 00:10:39,092
want that

174
00:10:39,092 --> 00:10:43,097
the other option is we could have had
one view controller

175
00:10:43,097 --> 00:10:46,164
for each content-type: and that seems
like it's a better approach

176
00:10:47,064 --> 00:10:50,150
but it's really not because there's
really a lot of things that

177
00:10:51,005 --> 00:10:56,006
the view controller just does innately
and the way you wind up with

178
00:10:56,051 --> 00:11:00,054
sharing common code is you want to push
it down to a common base class

179
00:11:00,054 --> 00:11:03,062
which ones being the same thing is
having one gigantic you control it

180
00:11:04,034 --> 00:11:04,086
because

181
00:11:04,086 --> 00:11:08,148
you pushed all database class so sure
you kinda hidden it a little bit but now

182
00:11:09,048 --> 00:11:10,059
it's down there

183
00:11:10,059 --> 00:11:13,075
and you're just not looking at it on and
it doesn't

184
00:11:13,075 --> 00:11:16,160
all solve the problem code reuse across
screens

185
00:11:17,006 --> 00:11:21,079
so we wanted a better solution now
fortunately

186
00:11:22,033 --> 00:11:26,126
I had the pleasure working on the Game
Center team during the Iowa 7 redesign

187
00:11:27,026 --> 00:11:30,047
and they came up with a solution to this
exact problem

188
00:11:30,047 --> 00:11:34,074
it's called aggregate data sources now
they're

189
00:11:34,074 --> 00:11:37,103
data was a little bit less complex than
ours by just

190
00:11:38,003 --> 00:11:42,084
a smidge I but they hit upon the right
answer

191
00:11:42,084 --> 00:11:45,133
which was building up data sources from
smaller data sources

192
00:11:46,033 --> 00:11:49,045
there's nothing that says that

193
00:11:49,045 --> 00:11:53,049
a UI collection you datasource has to be
implemented on your view controller

194
00:11:53,049 --> 00:11:56,076
in fact I would encourage you not

195
00:11:56,076 --> 00:12:00,081
to implement that data source on your
view controller in fact

196
00:12:01,026 --> 00:12:05,030
I go so far as to say never ever again
implemented under the

197
00:12:05,003 --> 00:12:12,003
you can I mean unless you really want to
but what we do here

198
00:12:12,033 --> 00:12:15,068
is we implemented as a general and its
object

199
00:12:15,068 --> 00:12:19,094
and then we build those together to
build a much more sophisticated data

200
00:12:19,094 --> 00:12:20,123
source

201
00:12:21,023 --> 00:12:24,097
and this goes a long way to enabling
code reuse

202
00:12:24,097 --> 00:12:27,122
because as you can imagine we've got
these little classes

203
00:12:28,022 --> 00:12:33,039
up data sources that we cobbled together
we reuse them all over the place

204
00:12:33,039 --> 00:12:36,103
and as a result we wound up with a
single view controller for our product

205
00:12:37,003 --> 00:12:38,029
detail screen

206
00:12:38,029 --> 00:12:43,097
that is only 14 methods now six of those
methods before you get all upset

207
00:12:43,097 --> 00:12:47,099
that F fourteen methods 60 those methods

208
00:12:47,099 --> 00:12:50,187
five other building 25 content types of
data sources

209
00:12:51,087 --> 00:12:55,122
one of them's building the overall the
source and then the rest the number some

210
00:12:56,022 --> 00:12:59,028
action methods the public or responder
chain

211
00:12:59,028 --> 00:13:02,077
I think there's some you know delegate
methods in there

212
00:13:02,077 --> 00:13:05,090
and what not so I mean we do go a little
overboard

213
00:13:05,009 --> 00:13:09,011
I probably could cut it down I'll but
you know

214
00:13:10,001 --> 00:13:13,004
we're getting there so let's take a look
at

215
00:13:13,004 --> 00:13:18,017
the four intrinsic aggregate data source
classes that you'll see in the sample

216
00:13:18,053 --> 00:13:19,127
code

217
00:13:20,027 --> 00:13:23,030
the first and most important one were

218
00:13:23,003 --> 00:13:26,064
all the action is is APL datasource

219
00:13:26,091 --> 00:13:29,164
that's the base data source that's where
we implement the UI collection view

220
00:13:30,064 --> 00:13:35,082
datasource protocol as well as a host of
other good stuff that will talk about

221
00:13:35,082 --> 00:13:38,127
in a little bit on top of that with
layered the

222
00:13:39,027 --> 00:13:42,032
AAPL segment to datasource

223
00:13:42,032 --> 00:13:46,074
and that can have multiple children but
only one of them's active at a time

224
00:13:46,074 --> 00:13:49,082
think I love a UI segment to control in
fact

225
00:13:49,082 --> 00:13:52,147
there's a good reason to think that it
will bend out a header

226
00:13:53,047 --> 00:13:56,131
with you i segment to control as part of
its

227
00:13:57,031 --> 00:14:00,035
base behavior then there's the APL

228
00:14:00,035 --> 00:14:04,067
composed datasource and that will take a
number of children

229
00:14:04,067 --> 00:14:08,356
they're all active at once and it
manages the mapping between the external

230
00:14:08,959 --> 00:14:11,970
index pouts and the internal child

231
00:14:11,097 --> 00:14:14,099
and ex-pats and then there's this

232
00:14:14,099 --> 00:14:17,170
AAPL basic data source how many times
have you had

233
00:14:18,007 --> 00:14:21,015
just the list things and you just wanna
shoulder

234
00:14:21,078 --> 00:14:24,123
well that's what the basic data sources
for it takes I'll

235
00:14:25,023 --> 00:14:28,119
an array of items it manages insertions
deletions reordering

236
00:14:29,019 --> 00:14:32,093
all that nasty stuff it sends out the
right notifications

237
00:14:32,093 --> 00:14:35,178
it only allows you to have one section
because there's countless times

238
00:14:36,078 --> 00:14:39,082
well that's all you need and we wind up
using it

239
00:14:39,082 --> 00:14:42,089
all over the place so let's take a look

240
00:14:43,052 --> 00:14:46,113
and how we use these four classes to
build

241
00:14:47,013 --> 00:14:50,060
up our product details datasource

242
00:14:50,006 --> 00:14:53,057
so first of all the product details
datasource

243
00:14:54,011 --> 00:14:57,022
is a segment to datasource and it has

244
00:14:57,022 --> 00:15:01,040
four segments: no surprise one for
details

245
00:15:01,004 --> 00:15:04,082
one for episodes one for reviews and one
for trends

246
00:15:05,018 --> 00:15:08,061
those correspond exactly to the UI
segmented

247
00:15:08,061 --> 00:15:13,123
control in the headers that you I
segment two controllers actually created

248
00:15:14,023 --> 00:15:17,064
by the segment a datasource

249
00:15:17,064 --> 00:15:20,073
now the details

250
00:15:20,073 --> 00:15:23,148
child datasource is composed

251
00:15:24,048 --> 00:15:27,085
datasource and it has children

252
00:15:27,085 --> 00:15:30,181
for the Status section

253
00:15:31,081 --> 00:15:34,155
information and description

254
00:15:35,055 --> 00:15:38,073
each one of those is its own data source

255
00:15:38,073 --> 00:15:42,432
the information was one of those key
value data sources

256
00:15:43,089 --> 00:15:46,620
the description here's a special textual

257
00:15:46,062 --> 00:15:50,073
datasource and all these appalling
information outpolled

258
00:15:50,073 --> 00:15:54,302
the product object

259
00:15:54,959 --> 00:15:59,360
now episodes is just one of those basic
data sources

260
00:15:59,036 --> 00:16:02,091
because we've just got a list of
episodes but this is where it gets

261
00:16:02,091 --> 00:16:03,097
interesting

262
00:16:03,097 --> 00:16:06,102
because as you can see episodes have

263
00:16:07,002 --> 00:16:10,068
show date now we could take

264
00:16:10,068 --> 00:16:15,092
the date and we could pass stop to the
cell and we could have the cell

265
00:16:15,092 --> 00:16:18,095
created an estate format or we could
read written

266
00:16:18,095 --> 00:16:21,173
do that but we've been told countless
times that

267
00:16:22,073 --> 00:16:25,111
thats really the wrong thing to do right

268
00:16:26,011 --> 00:16:30,069
so this is what data sources allow us to
do is we can encapsulate

269
00:16:30,069 --> 00:16:33,117
task-specific logic presentation

270
00:16:34,017 --> 00:16:37,035
specific logic so in

271
00:16:37,035 --> 00:16:41,124
my episodes datasource that's where I
have a big formatter

272
00:16:42,024 --> 00:16:45,121
that specific to the to the episodes and
I do that conversion

273
00:16:46,021 --> 00:16:49,049
up the estate that in each episode

274
00:16:49,049 --> 00:16:52,106
into a string before I jamming into the
cell

275
00:16:53,006 --> 00:16:56,044
and that way I get the best performance

276
00:16:56,044 --> 00:17:00,126
rather than allowing that to happen each
cell

277
00:17:01,026 --> 00:17:04,074
then reviews is another compose
datasource

278
00:17:04,074 --> 00:17:08,107
probably getting tired us but it's great
let me let me tell you

279
00:17:09,007 --> 00:17:13,026
I and the composed a source for reviews
has one for ratings

280
00:17:13,026 --> 00:17:16,465
and another one for the actual reviews

281
00:17:16,699 --> 00:17:19,725
and will actually come back to the
reviews datasource

282
00:17:19,959 --> 00:17:24,970
when we look at how things loading in
the and coming up slides

283
00:17:24,097 --> 00:17:28,128
and then trends is a custom data source
it arrives directly from

284
00:17:29,028 --> 00:17:33,427
the base data source because we go out
we fetch the trend data

285
00:17:33,679 --> 00:17:38,790
and then we actually render it in two
separate sections one for the graph

286
00:17:38,079 --> 00:17:42,112
and then another for the historical data

287
00:17:43,012 --> 00:17:47,013
so that's how we build up a product
details datasource

288
00:17:47,013 --> 00:17:51,060
from all these little aggregate data
sources

289
00:17:51,006 --> 00:17:55,010
and that has an additional benefit
because remember I told you that we

290
00:17:55,064 --> 00:17:56,093
wanted to have

291
00:17:56,669 --> 00:17:59,830
a single loading indicator

292
00:17:59,083 --> 00:18:03,682
right well we originally tried

293
00:18:04,429 --> 00:18:07,450
to make are single point the truth

294
00:18:07,045 --> 00:18:10,110
for whether we're loading be the view
controller

295
00:18:11,001 --> 00:18:14,044
that's kinda tough because the view
controller

296
00:18:14,053 --> 00:18:17,452
really doesn't know what all is being
loaded

297
00:18:17,929 --> 00:18:21,230
right we've got five different content
types multiple sections

298
00:18:21,023 --> 00:18:26,050
with subsections within them each one
load its own content

299
00:18:26,005 --> 00:18:30,049
how's it going and I'll what turns out
we have 1k

300
00:18:30,094 --> 00:18:35,099
that knows about everything and that's
the product details datasource

301
00:18:35,099 --> 00:18:38,144
so the answer to the whole problem

302
00:18:39,044 --> 00:18:42,048
up who knows what's loading

303
00:18:42,084 --> 00:18:46,108
is the datasource the data source is
responsible for loading its content

304
00:18:47,008 --> 00:18:50,070
and when you think about it it actually
makes total sense

305
00:18:50,007 --> 00:18:54,064
and if you make the data source is
responsible

306
00:18:55,027 --> 00:18:58,038
they know just the data they need to
load

307
00:18:58,038 --> 00:19:01,135
they know exactly how to load it and
their already responsible for their own

308
00:19:02,035 --> 00:19:03,049
past specific

309
00:19:03,049 --> 00:19:07,064
logic so they can format it do whatever
they need to do

310
00:19:07,064 --> 00:19:11,119
and make it ready for presentation so
now the view controller kicks off the

311
00:19:12,019 --> 00:19:12,112
whole process

312
00:19:13,012 --> 00:19:16,098
in view will appear by sending a low
data

313
00:19:16,098 --> 00:19:20,102
to the datasource which in turn
propagates that message

314
00:19:21,002 --> 00:19:25,003
to its children as appropriate so for
example a segment to datasource

315
00:19:25,003 --> 00:19:28,057
or only send it to the selected its
source

316
00:19:28,057 --> 00:19:32,416
but I composed datasource will send all
of its children

317
00:19:32,929 --> 00:19:38,810
and because we're good computer
scientists just like all of you

318
00:19:38,081 --> 00:19:41,108
we as a state machine keep track of
everything

319
00:19:42,008 --> 00:19:48,075
you work right let's take a look at
section

320
00:19:48,075 --> 00:19:51,094
so the obviously named

321
00:19:51,094 --> 00:19:55,187
aglo doubles content state machine

322
00:19:56,087 --> 00:20:00,136
um got a few states it's not as nasty as

323
00:20:00,919 --> 00:20:04,630
as it could be all data sources

324
00:20:04,063 --> 00:20:07,097
start of the initial state until they
receive a load content

325
00:20:07,097 --> 00:20:10,796
message once they perceive the load
content message

326
00:20:11,669 --> 00:20:15,780
then the transition into the loading
content state that's when we display the

327
00:20:15,078 --> 00:20:16,119
spinner

328
00:20:17,019 --> 00:20:20,048
that's the only time we ever display
this banner and if you notice

329
00:20:20,048 --> 00:20:23,049
you can't ever get back their

330
00:20:23,049 --> 00:20:26,051
so when they get content where they get
an error or the

331
00:20:26,051 --> 00:20:30,086
receive no content from there respective
sources

332
00:20:30,086 --> 00:20:33,179
they'll transition into no content
content loaded warned her state will

333
00:20:34,079 --> 00:20:34,152
display

334
00:20:35,052 --> 00:20:38,059
the appropriate a view

335
00:20:39,022 --> 00:20:42,026
and we'll take a look at exactly how
that works

336
00:20:42,026 --> 00:20:45,062
so let's see how this all works from a a

337
00:20:45,062 --> 00:20:48,067
datasource loading date of the network
and from the UI standpoint so here we

338
00:20:49,012 --> 00:20:49,097
are

339
00:20:49,097 --> 00:20:52,170
in the end initial state we've got my
check list

340
00:20:53,007 --> 00:20:56,083
datasource this is from a from the
sample application because I am

341
00:20:57,046 --> 00:21:00,085
Kat Krazy and

342
00:21:00,085 --> 00:21:05,087
yes I was heartbroken when we switch to
California landmarks

343
00:21:05,087 --> 00:21:08,089
the yeah

344
00:21:08,089 --> 00:21:12,106
I thought the Ocelot was finally gonna
get its chance

345
00:21:13,006 --> 00:21:16,074
I'm so we're starting off in the initial
state and we get the load content

346
00:21:16,074 --> 00:21:17,107
message

347
00:21:18,007 --> 00:21:22,020
and we transition into loading content
when the datasource

348
00:21:22,002 --> 00:21:25,014
in this case it's gonna request out to
its server

349
00:21:25,032 --> 00:21:29,100
get me some caps the server eventually
comes back and says

350
00:21:30,000 --> 00:21:33,088
here you go now depending on what the
responses

351
00:21:33,088 --> 00:21:36,162
then it's gonna make a transition to the
right place and let's take a look

352
00:21:37,062 --> 00:21:41,063
what the you why does in this case so
here we are loading content

353
00:21:41,063 --> 00:21:44,071
showing the spinner and

354
00:21:44,071 --> 00:21:47,119
let's imagine we get back some cats

355
00:21:48,019 --> 00:21:50,114
so here we're gonna display the cats
like I said this is that simple

356
00:21:51,014 --> 00:21:52,038
application

357
00:21:52,038 --> 00:21:56,069
I'm assuming everything works well with
you compile and run exactly as

358
00:21:56,069 --> 00:21:59,081
as planned on your apt on your machines

359
00:21:59,081 --> 00:22:02,082
and we'll see our list the big cats
right there on our

360
00:22:02,082 --> 00:22:05,090
devices however

361
00:22:06,062 --> 00:22:10,621
if you know anything about cats there
never where you expect them to be

362
00:22:11,179 --> 00:22:14,201
so more than likely you're gonna

363
00:22:14,399 --> 00:22:19,399
try to load the cats any gonna be told
there are no cats here

364
00:22:19,399 --> 00:22:22,820
will the great thing about this is I had
to do no work

365
00:22:22,082 --> 00:22:25,661
here which is great cuz cats

366
00:22:26,399 --> 00:22:29,401
do a lot of work for you on so

367
00:22:29,419 --> 00:22:33,020
in this case all I set up was the No
content message in the new content title

368
00:22:33,002 --> 00:22:34,098
on my datasource

369
00:22:34,098 --> 00:22:38,121
and behind the scenes the machinery to
care everything else

370
00:22:39,021 --> 00:22:42,079
why transition into the new content
state the layout

371
00:22:42,079 --> 00:22:46,113
and the data sources take care
presenting the placeholder for me

372
00:22:47,013 --> 00:22:50,062
really takes a lot of the burden off my
shoulders

373
00:22:50,062 --> 00:22:53,151
now sometimes things go wrong

374
00:22:54,051 --> 00:22:57,132
and then we go from the loading content
state

375
00:22:58,032 --> 00:23:02,071
into the air state and similarly to no
content

376
00:23:02,071 --> 00:23:06,099
if we configured an error message and
inherit title

377
00:23:06,099 --> 00:23:10,101
will get a placeholder telling the user
what's gone wrong

378
00:23:11,019 --> 00:23:14,019
so this is a really great way

379
00:23:14,019 --> 00:23:17,057
to that we found to get are

380
00:23:17,057 --> 00:23:20,666
consistent you why but it's a little bit
more than that

381
00:23:21,179 --> 00:23:24,600
because in most cases

382
00:23:24,006 --> 00:23:27,049
we're not just loading one thing right

383
00:23:28,003 --> 00:23:32,058
I mentioned would come back to the
ratings and reviews

384
00:23:32,058 --> 00:23:35,070
we load and information separately

385
00:23:35,007 --> 00:23:38,038
would fetch the ratings and we fetch the
reviews

386
00:23:39,001 --> 00:23:43,660
well we can't update if we've got a
single loading indicator

387
00:23:43,669 --> 00:23:46,790
we can update the collection view but
the ratings

388
00:23:46,079 --> 00:23:49,134
and then the reviews that wouldn't look
right

389
00:23:50,034 --> 00:23:53,113
so we gotta update everything all at
once

390
00:23:53,419 --> 00:23:56,550
and in order to do that we needed a

391
00:23:56,055 --> 00:23:59,120
solution that was elegant

392
00:24:00,002 --> 00:24:03,091
because anything less would be just
wrong

393
00:24:04,009 --> 00:24:08,076
so the solution that we came up with
relies on the fact that we have

394
00:24:08,076 --> 00:24:12,163
a parent-child relationship to our data
sources so let's take a look at that

395
00:24:13,063 --> 00:24:17,155
all over data sources start of in the
initial state

396
00:24:18,055 --> 00:24:21,122
they get the load content message and
then he all transition into loading

397
00:24:22,022 --> 00:24:23,047
content state

398
00:24:23,047 --> 00:24:26,105
at which point the ratings and the
reviews data sources

399
00:24:27,005 --> 00:24:30,061
send out their requests to the server

400
00:24:30,061 --> 00:24:33,096
now we all know that the servers not
gonna respond

401
00:24:33,096 --> 00:24:36,113
simultaneously to both requests that's

402
00:24:37,013 --> 00:24:41,050
fantasyland so what happens is one other
responses comes back

403
00:24:41,005 --> 00:24:44,100
first that data source will process the
response

404
00:24:45,045 --> 00:24:49,073
but not update itself what it does is
accused of a block

405
00:24:49,073 --> 00:24:52,105
that actually will do the update and it
sends it up

406
00:24:53,005 --> 00:24:59,052
apparent change and that Michael
disorder hang up there for a bit

407
00:24:59,052 --> 00:25:04,711
then the next datasource will get its
response

408
00:25:05,179 --> 00:25:09,330
it does the same thing it transitions
into content loaded

409
00:25:09,033 --> 00:25:12,045
shoe's upper an update block

410
00:25:12,045 --> 00:25:15,114
and then the parent will discover I'll
look

411
00:25:16,014 --> 00:25:20,057
all of my children are loaded it's okay
for me to try and say

412
00:25:20,057 --> 00:25:23,102
transition into contact loaded and now

413
00:25:24,002 --> 00:25:28,046
I can call perform batch updates on the
collection view

414
00:25:28,046 --> 00:25:32,515
and schedule all those update blocks
safely

415
00:25:32,929 --> 00:25:39,890
insider perform backup update block

416
00:25:39,089 --> 00:25:42,160
the good thing about all this is we
don't get exceptions because our timing

417
00:25:43,006 --> 00:25:43,044
in

418
00:25:43,098 --> 00:25:48,195
and be consistencies and I don't know
about you but I don't like exceptions

419
00:25:49,095 --> 00:25:53,122
my boss kits for the corruption so to
recap

420
00:25:54,022 --> 00:25:58,060
aggregate data sources were a great way
for us to reduce our view controller

421
00:25:58,006 --> 00:25:58,074
complexity

422
00:25:59,028 --> 00:26:03,030
our view controller only does do you
control a rethinks

423
00:26:03,048 --> 00:26:07,100
it no longer involved in the datasource
other than setting up

424
00:26:08,000 --> 00:26:11,051
and went a long way to promoting code
reviews

425
00:26:11,051 --> 00:26:15,146
so now our code is scattered in these
aggregate data sources that we use

426
00:26:16,046 --> 00:26:19,114
all over the place and isolates
task-specific logic

427
00:26:20,014 --> 00:26:23,923
that we use for setting up our cells
into the data sources where they're

428
00:26:24,049 --> 00:26:25,100
appropriate

429
00:26:25,559 --> 00:26:31,660
and we got that single loading indicator
that we were looking for

430
00:26:31,066 --> 00:26:36,088
so that was our first two requirements

431
00:26:36,088 --> 00:26:40,140
so let's take a look at the next four

432
00:26:41,004 --> 00:26:44,012
which necessitated

433
00:26:45,002 --> 00:26:49,015
a custom you I collection view layout

434
00:26:49,033 --> 00:26:52,262
now have a confession to make on

435
00:26:52,559 --> 00:26:55,820
the first time I built the layout

436
00:26:55,082 --> 00:26:59,096
I was very unhappy it worked

437
00:26:59,096 --> 00:27:04,113
they weren't actually really well but I
am

438
00:27:05,013 --> 00:27:08,077
mean actually put this hard to please

439
00:27:08,077 --> 00:27:12,113
and if didn't work as well as I wanted

440
00:27:13,013 --> 00:27:17,058
and the reason is I didn't collect all
the information that I should have

441
00:27:17,058 --> 00:27:20,083
I tried to to be done

442
00:27:20,083 --> 00:27:24,182
and just move on to other things so the
message I want you to take away from all

443
00:27:24,929 --> 00:27:25,610
this and I'm

444
00:27:25,061 --> 00:27:28,097
I'm for skipping had to the summary
before leaving start

445
00:27:28,097 --> 00:27:31,151
is who your bookkeeping get

446
00:27:32,051 --> 00:27:36,052
all the information you can and at the
very end run instruments

447
00:27:36,052 --> 00:27:39,075
to make sure that you have enough memory
and your not using

448
00:27:39,075 --> 00:27:42,132
too much resources and then prune

449
00:27:43,032 --> 00:27:46,067
back the information keeping but cheap
at all

450
00:27:46,067 --> 00:27:50,075
a prime so let's take a look at the
information I kept

451
00:27:51,047 --> 00:27:55,133
if Michelle didn't keep and what I
should have kept

452
00:27:56,033 --> 00:27:59,094
so first what I need to keep

453
00:27:59,094 --> 00:28:02,333
and where did belong

454
00:28:03,179 --> 00:28:06,390
so obviously we got these great designs
from hiii

455
00:28:06,039 --> 00:28:09,047
and there's pictures right

456
00:28:09,047 --> 00:28:12,141
we need to interpret that and figure out
what did we need from that

457
00:28:13,041 --> 00:28:16,139
to actually lay out cells and headers
and and footers and

458
00:28:17,039 --> 00:28:21,088
supplementary views and decoration views
the whole nine yards

459
00:28:21,088 --> 00:28:25,127
and then kinda as a footnote where does
it all go

460
00:28:26,027 --> 00:28:29,099
one address that first get it out the
way

461
00:28:29,099 --> 00:28:32,100
in sources band visual information

462
00:28:33,009 --> 00:28:37,057
defend views design metrics official
information

463
00:28:37,057 --> 00:28:40,152
I put them in the datasource partly
because

464
00:28:41,052 --> 00:28:44,053
the data sources are hierarchical and
they've got

465
00:28:44,062 --> 00:28:48,063
fault metrics into got section base
metrics it just made sense

466
00:28:48,063 --> 00:28:52,076
to put it there I could put it now
parallel structure

467
00:28:52,076 --> 00:28:55,150
and had parallel structures never been
too crazy

468
00:28:56,005 --> 00:29:01,012
so there in the data sources that's
where you'll find so let's take a look

469
00:29:02,002 --> 00:29:06,007
at the section metrics so we've got some
big cats

470
00:29:06,007 --> 00:29:10,226
and naturally we're gonna wanna know the
row height

471
00:29:10,919 --> 00:29:15,200
we also one another background-color:

472
00:29:15,002 --> 00:29:18,071
right are a lot of our sections

473
00:29:18,089 --> 00:29:24,136
can be crazy summer white number garish
colors

474
00:29:25,036 --> 00:29:28,098
obviously we have some that have
separators and separator insets

475
00:29:28,098 --> 00:29:31,102
but not all of our sections have
separators

476
00:29:32,002 --> 00:29:35,101
so we need to be able set them on a per
section basis

477
00:29:36,001 --> 00:29:41,001
we also need to be able set a selected
background-color:

478
00:29:41,001 --> 00:29:44,084
the way we determine whether or not a
cell appears

479
00:29:44,084 --> 00:29:49,088
selectable is by the selected
background-color:

480
00:29:49,088 --> 00:29:52,175
whether actually a selectable is in code

481
00:29:53,075 --> 00:29:57,077
now remember we also support multiple
columns

482
00:29:57,077 --> 00:30:01,083
so we needed to know based on the
section how many columns should support

483
00:30:02,037 --> 00:30:07,051
and whether or not it should show a
column separator

484
00:30:07,051 --> 00:30:11,069
for the headers and footers we similarly
needed to know

485
00:30:11,069 --> 00:30:14,126
the height for the most the time we set
this to 0 which means

486
00:30:15,026 --> 00:30:18,122
figured out yourself thanks to on a
layup

487
00:30:19,022 --> 00:30:22,023
we also want to know the background
color

488
00:30:22,032 --> 00:30:28,063
but most the time we set this to nell
which means inherited from the section

489
00:30:28,063 --> 00:30:31,096
and we also

490
00:30:31,096 --> 00:30:35,100
want to specify a paddock because one of
the things that we saw in our designs a

491
00:30:36,036 --> 00:30:36,132
lot

492
00:30:37,032 --> 00:30:40,049
was exactly the same header

493
00:30:40,049 --> 00:30:43,147
but with a little bit more space between
this instance the header

494
00:30:44,047 --> 00:30:47,102
not instant to the header and yeah

495
00:30:48,002 --> 00:30:51,034
we could find a subclass to give us a
little extra space

496
00:30:51,034 --> 00:30:54,079
or we could just have another metric
that says

497
00:30:54,079 --> 00:30:57,150
0 here we're gonna have 10 points
spacing there we have 20

498
00:30:58,005 --> 00:31:01,684
so we added padding actually wanna
beings

499
00:31:02,179 --> 00:31:05,270
hugely helpful when it won when we
needed to line things

500
00:31:05,027 --> 00:31:08,036
horizontally as well so this gave us

501
00:31:08,036 --> 00:31:11,855
all the information we needed to lay
things out

502
00:31:12,179 --> 00:31:15,780
in our actual layout

503
00:31:15,078 --> 00:31:17,847
but some %uh this information needed to
be passed along to the cells in the

504
00:31:18,549 --> 00:31:19,140
headers

505
00:31:19,014 --> 00:31:22,037
and to do that we had some custom
attributes

506
00:31:22,037 --> 00:31:25,216
I'm sure you all know that you can
create some classes the layout

507
00:31:25,549 --> 00:31:26,700
attributes

508
00:31:26,007 --> 00:31:29,486
so what exactly what we did and we
wonder with 4

509
00:31:30,179 --> 00:31:33,520
a few more I cut custom attributes

510
00:31:33,052 --> 00:31:36,841
first law background color and style
select a background color

511
00:31:37,309 --> 00:31:40,650
and padding but also can header

512
00:31:40,065 --> 00:31:43,122
at one point we thought that we wanted
our headers

513
00:31:44,022 --> 00:31:47,095
to respond to being penned for example
if we'd had a

514
00:31:47,095 --> 00:31:50,151
I'm a navigation bar that was blue

515
00:31:51,051 --> 00:31:55,055
would make perfect sense for the header
to reach the top pin

516
00:31:55,091 --> 00:31:58,115
and change to be blue and

517
00:31:59,015 --> 00:32:02,414
it would need to know that was pinned in
order to do that

518
00:32:02,549 --> 00:32:05,586
so those with a custom attributes we
decide decided

519
00:32:05,919 --> 00:32:10,370
fine for headers and footers and
ourselves

520
00:32:10,037 --> 00:32:13,846
now remember we also needed to support

521
00:32:14,179 --> 00:32:18,217
global headers to do that

522
00:32:18,559 --> 00:32:21,690
I'm gonna let you in on what I thought

523
00:32:21,069 --> 00:32:24,141
was a secret turns out it's not

524
00:32:25,041 --> 00:32:29,112
arm we're all familiar with and it's an
expat normally having two indices

525
00:32:30,012 --> 00:32:33,571
one for section one for item

526
00:32:33,679 --> 00:32:37,330
will it seems that you can also create

527
00:32:37,033 --> 00:32:40,039
an innocent XPath with one index

528
00:32:40,039 --> 00:32:43,044
and when you do that you're creating

529
00:32:43,044 --> 00:32:46,044
a global supplement review

530
00:32:46,044 --> 00:32:50,127
index path or a global decoration human
expert

531
00:32:51,027 --> 00:32:54,089
it makes no sense to create these for
items so don't try

532
00:32:54,089 --> 00:32:57,182
but this is how we separated are global
headers

533
00:32:58,082 --> 00:33:02,095
from everything else when we initially
tried this

534
00:33:02,095 --> 00:33:05,814
I tried to lump them in the section 0
not just made no sense

535
00:33:06,669 --> 00:33:11,210
so now I'm able to distinguish them from
everything else

536
00:33:11,021 --> 00:33:15,033
and we treat global headers differently
when you look at the sample code

537
00:33:15,033 --> 00:33:19,101
you'll notice that the global headers
actually never go off screen

538
00:33:20,001 --> 00:33:24,035
they a pin just underneath the
navigation bar

539
00:33:24,035 --> 00:33:28,114
the treated as what will call special
attributes:

540
00:33:28,429 --> 00:33:32,880
and they get updated as you scroll so
that they stay in place they do all

541
00:33:32,088 --> 00:33:32,164
sorts of funny

542
00:33:33,064 --> 00:33:37,140
fancy things now the code needs to be a
little bit smart

543
00:33:38,004 --> 00:33:41,403
so that you checked the length view
index path so that you don't

544
00:33:41,799 --> 00:33:44,830
accidentally call section and item

545
00:33:44,083 --> 00:33:48,108
for these global index baths but other
than that

546
00:33:49,008 --> 00:33:52,014
you're good now

547
00:33:52,014 --> 00:33:55,035
building a layout earlier today

548
00:33:55,035 --> 00:33:58,062
you might have heard olivier mention
that

549
00:33:58,062 --> 00:34:01,069
I if you want to be really careful

550
00:34:01,069 --> 00:34:04,087
about using invalidation or wanna be
really careful

551
00:34:04,087 --> 00:34:08,119
to use invalidation I should say and
that's exactly the case

552
00:34:09,019 --> 00:34:12,091
you might be tempted to build the most
perfect

553
00:34:12,091 --> 00:34:15,154
single-pass layout and

554
00:34:16,054 --> 00:34:19,833
docked because which will wind up with

555
00:34:20,319 --> 00:34:23,325
is absolute efficiency

556
00:34:23,379 --> 00:34:27,290
the first time and then someone will
come in and the look close you'll come

557
00:34:27,029 --> 00:34:27,036
in and say

558
00:34:27,099 --> 00:34:30,144
hey the cell has changed

559
00:34:31,044 --> 00:34:34,062
and you have to relate to everything or

560
00:34:34,062 --> 00:34:38,067
origin has changed because you scrolled
and you have to lay out everything

561
00:34:39,012 --> 00:34:43,044
and you're just drop your performance
will die so let's take a look

562
00:34:43,044 --> 00:34:46,503
at the pseudocode so to speak for for
the layout

563
00:34:46,899 --> 00:34:49,908
that we came up with and then we're
gonna show you

564
00:34:50,799 --> 00:34:53,980
a little bit of how we snapshot the
metrics

565
00:34:53,098 --> 00:34:56,127
for one of our sections and I think
you'll get a good sense why

566
00:34:57,027 --> 00:35:01,099
breaking this up into sections is really
important

567
00:35:01,099 --> 00:35:04,104
so first of all if the data sources
changed

568
00:35:05,049 --> 00:35:08,608
significantly like it's totally
different one or the total number

569
00:35:09,049 --> 00:35:10,450
sections change

570
00:35:10,045 --> 00:35:13,434
we just throw everything away and the
reason for this is

571
00:35:13,839 --> 00:35:16,839
it's probably more efficient for us

572
00:35:16,839 --> 00:35:20,060
to just three computer everything that
it would be to compute the deltas

573
00:35:20,006 --> 00:35:23,014
because our data sources are actually
pretty small

574
00:35:23,014 --> 00:35:26,051
if you've seen iTunes Connect you know
that the actual content

575
00:35:26,051 --> 00:35:29,075
isn't that big so

576
00:35:29,075 --> 00:35:32,128
yell I could probably come up with a
clever way to computer deltas and

577
00:35:33,028 --> 00:35:34,031
everything else

578
00:35:34,031 --> 00:35:37,118
but this wound up being just easier in
the long run

579
00:35:38,018 --> 00:35:42,677
getting it done sometimes just as
important

580
00:35:42,839 --> 00:35:46,760
next if the collection views with has
changed

581
00:35:46,076 --> 00:35:49,142
or obviously if I threw everything away
then I need to regenerate

582
00:35:50,042 --> 00:35:53,421
all the layout actually it's as well as

583
00:35:53,799 --> 00:35:57,874
collect all the special layout
attributes so all those global hatter's

584
00:35:58,549 --> 00:36:03,520
and any pin headers that might have been
defined within the content

585
00:36:03,052 --> 00:36:08,138
so I make that single pass and I lay out
everything

586
00:36:09,038 --> 00:36:14,060
and then if the origin has changed
because we strolled

587
00:36:14,006 --> 00:36:17,085
I update the position have any special

588
00:36:18,039 --> 00:36:21,238
layout acts now when I go back

589
00:36:21,589 --> 00:36:25,616
and I update all this code to support I
was 8 I'm gonna fix this

590
00:36:25,859 --> 00:36:29,430
because I use the new invalidation
contacts in the slot be different

591
00:36:29,043 --> 00:36:32,110
but this is how we do it today so let's
take a look

592
00:36:33,001 --> 00:36:37,006
at how we snapshot the metrics

593
00:36:37,015 --> 00:36:41,050
so we have this hierarchical structure
data sources

594
00:36:41,005 --> 00:36:44,020
and on you're right

595
00:36:44,065 --> 00:36:47,100
is the product details three

596
00:36:48,000 --> 00:36:51,024
so we start with section 0

597
00:36:51,024 --> 00:36:54,067
which is status and we begin our
snapshot

598
00:36:54,067 --> 00:36:57,102
at the barre least specific data source

599
00:36:58,002 --> 00:37:01,007
which is the segment the datasource now
in this case

600
00:37:01,052 --> 00:37:04,123
these are actually the default metrics
for the entire

601
00:37:05,023 --> 00:37:08,116
product details and that row height
equals 44

602
00:37:09,016 --> 00:37:12,035
background-color: it was like great that
means

603
00:37:12,035 --> 00:37:15,048
everything is relied was forty four

604
00:37:15,048 --> 00:37:18,146
background-color: it's like crack so
that's what we start with

605
00:37:19,046 --> 00:37:23,655
next we move to the next most specific
data source which is the composed

606
00:37:24,069 --> 00:37:24,850
datasource

607
00:37:24,085 --> 00:37:27,146
for details it just so happens

608
00:37:28,046 --> 00:37:31,078
but it doesn't define any metrics
whatsoever not eat

609
00:37:31,078 --> 00:37:34,086
the fault metrics not sexually metrics

610
00:37:35,058 --> 00:37:38,133
so then we can move on to the status
data source

611
00:37:39,033 --> 00:37:44,072
which has section based metrics
specifically for that section

612
00:37:44,072 --> 00:37:47,691
row hi people sixty and select the
background color

613
00:37:48,339 --> 00:37:54,040
medium grey because remember we do the
selection based on the actual color

614
00:37:54,004 --> 00:37:58,077
cell we have these overrides for row
height

615
00:37:58,077 --> 00:38:01,083
and we have a new attribute for the
selected background-color:

616
00:38:01,083 --> 00:38:04,158
so you can imagine if we had to go
through this

617
00:38:05,058 --> 00:38:09,066
every time we move the origin the
collection to you

618
00:38:09,066 --> 00:38:12,114
we get terrible free

619
00:38:13,014 --> 00:38:16,068
so it's really important that we only do
this when it's

620
00:38:16,068 --> 00:38:21,114
absolutely necessary so we only do it
when the collection to changes

621
00:38:22,014 --> 00:38:25,090
but then we go through and we updater
attributes 1

622
00:38:25,009 --> 00:38:29,038
when we actually scroll so I spoke
earlier

623
00:38:30,019 --> 00:38:33,097
about optional layup methods and this is
where

624
00:38:33,097 --> 00:38:37,098
my whole confession comes in I did these
out of order

625
00:38:37,098 --> 00:38:40,189
I'm i knows but the summit you in the
lab earlier I give you some

626
00:38:41,089 --> 00:38:44,090
specific details I started

627
00:38:44,009 --> 00:38:47,096
with initial layout attributes and
finally attributes

628
00:38:48,077 --> 00:38:52,079
and I realize that oh my goodness in
order to do

629
00:38:52,079 --> 00:38:55,378
initial layout attributes and finally
attributes I need

630
00:38:56,089 --> 00:38:59,470
the update information so let me
implement prepare for click to view

631
00:38:59,047 --> 00:39:00,072
updates

632
00:39:00,072 --> 00:39:04,116
and I'll just grab the arrestee updates

633
00:39:05,016 --> 00:39:08,102
well just on the stash that's over here
because I meet them

634
00:39:09,002 --> 00:39:12,008
and each time I would got called for
initial a ride to protect what the array

635
00:39:12,062 --> 00:39:14,141
and I try to figure out what was going
on

636
00:39:15,041 --> 00:39:19,056
and quickly my head exploded because it
was just too hard

637
00:39:19,056 --> 00:39:22,104
and and I i admit

638
00:39:23,004 --> 00:39:26,091
I deleted all the code I went on to
other things

639
00:39:26,091 --> 00:39:29,108
and it was weeks before I was willing to
come back to it

640
00:39:30,008 --> 00:39:33,037
arm and fortunately in those weeks I
talk to a lot of people

641
00:39:33,037 --> 00:39:37,072
I read a lot of the documentation and I
finally figured out what I was doing

642
00:39:37,072 --> 00:39:38,121
wrong

643
00:39:39,021 --> 00:39:42,097
and what I was doing wrong wasn't doing
my bookkeeping

644
00:39:42,097 --> 00:39:45,169
I was in collecting the information that
I need

645
00:39:46,069 --> 00:39:49,123
and so let's talk about that information

646
00:39:50,023 --> 00:39:53,071
and more importantly let's talk about
the information

647
00:39:53,071 --> 00:39:57,075
in the right water so this it turns out
is the right order

648
00:39:57,075 --> 00:40:01,147
prepare for a layup you probably already
implement this if you're doing a layout

649
00:40:02,047 --> 00:40:05,115
but there's some information that we
need to capture here not just

650
00:40:06,015 --> 00:40:10,092
building layout and then prepare for
collection few updates

651
00:40:10,092 --> 00:40:14,261
followed by target content offset for
propose come to an upset

652
00:40:15,089 --> 00:40:18,520
which is quite a mouthful an initial
eight attributes and finally

653
00:40:18,052 --> 00:40:21,118
attributes something to talk about pair
layout

654
00:40:22,018 --> 00:40:25,060
and prepare for collection you updates
together because they

655
00:40:25,006 --> 00:40:28,245
do sort of pair up

656
00:40:28,839 --> 00:40:32,844
first prepare layout so here's my mail

657
00:40:33,339 --> 00:40:36,490
very colorful and when I get

658
00:40:36,049 --> 00:40:39,146
prepare layout what I do as I take a
snapshot

659
00:40:40,046 --> 00:40:45,195
up the current layout I keep as my old
laptop

660
00:40:45,609 --> 00:40:49,220
in the process a building my layout I
have a lookup table

661
00:40:49,022 --> 00:40:52,391
between all the Indus index pounds

662
00:40:52,589 --> 00:40:55,641
to items all the index pads to
supplement reviews

663
00:40:56,109 --> 00:40:59,410
all the index pounds decoration views

664
00:40:59,041 --> 00:41:02,077
number I said keep everything well

665
00:41:02,077 --> 00:41:05,123
when I get called to prepare layout i
duplicate everything

666
00:41:06,023 --> 00:41:09,071
and I I stashed as the all layout

667
00:41:09,071 --> 00:41:13,092
then in prepare for collection you
updates

668
00:41:13,092 --> 00:41:16,121
I create a lookup table for deletions
insertions

669
00:41:17,021 --> 00:41:20,042
and everything that was reloaded I run
through

670
00:41:20,042 --> 00:41:24,651
the array of updates and every all the
deletions get tracked

671
00:41:25,029 --> 00:41:29,270
and all the insertions also contract

672
00:41:29,027 --> 00:41:33,120
so now I know everything that's going on
in my life

673
00:41:34,002 --> 00:41:37,075
and then before I'm done with prepare
for collection the updates

674
00:41:37,093 --> 00:41:40,982
I calculate the cheek the Delta in the
height

675
00:41:41,819 --> 00:41:45,250
up the two layouts as well as

676
00:41:45,025 --> 00:41:49,058
the change in we're the car the offset
up the

677
00:41:49,058 --> 00:41:53,144
start my content should be because I've
got content that spanned

678
00:41:54,044 --> 00:41:58,045
and possibly sprawl of the screen it
gets a little bit tricky

679
00:41:58,054 --> 00:42:01,097
and for the sake of the examples were
gonna ignore all that

680
00:42:01,097 --> 00:42:04,191
but that all gets done right here before
I return from

681
00:42:05,091 --> 00:42:08,790
prepare for collection updates

682
00:42:09,609 --> 00:42:14,400
cell let's take a look at wanna the
other methods I didn't implement

683
00:42:14,004 --> 00:42:19,203
and later wished I had the target
content of that method

684
00:42:19,599 --> 00:42:24,320
now the documentation says that this
adjust the scroll upset

685
00:42:24,032 --> 00:42:28,811
and I didn't understand this really how
important this one's

686
00:42:29,099 --> 00:42:33,030
until I saw in action so I have
animations are gonna show you

687
00:42:33,003 --> 00:42:38,051
just how important this is I its use by
my layout actually to calculate

688
00:42:38,051 --> 00:42:41,132
the pinning offset and the Delta that I
used to prevent

689
00:42:42,032 --> 00:42:45,043
unwanted motion and the trick is

690
00:42:45,043 --> 00:42:48,452
I get this calculation correct which
took a little while

691
00:42:48,839 --> 00:42:51,917
but then I use it in so many places so
let's take a look at a

692
00:42:52,619 --> 00:42:56,380
exactly how that works before I
implemented this

693
00:42:56,038 --> 00:42:59,123
Europe got my old content and its 320 by

694
00:43:00,023 --> 00:43:04,044
1000 I'm scroll all the way to the
bottom

695
00:43:04,044 --> 00:43:08,050
and I put in some new content which is
considerably shorter

696
00:43:08,005 --> 00:43:12,007
and collections you remember does a lot
of work for us

697
00:43:12,007 --> 00:43:16,068
and it says K that's not valid I'll help
you out

698
00:43:17,031 --> 00:43:20,042
all adjuster content offset 20 165

699
00:43:20,042 --> 00:43:24,048
I'll admit everything down for all
member

700
00:43:25,002 --> 00:43:28,074
I'm not easy to please and I don't want
their

701
00:43:28,074 --> 00:43:31,168
I wanna be we'll see the new content
beginning at the new content

702
00:43:32,068 --> 00:43:35,257
that's kinda why I put it there so

703
00:43:35,869 --> 00:43:39,990
that means to me that I need to change
my content offset

704
00:43:39,099 --> 00:43:42,164
soul after implementing

705
00:43:43,064 --> 00:43:46,067
target content offset propose content
upset

706
00:43:46,067 --> 00:43:49,148
cry pair got my old content

707
00:43:50,048 --> 00:43:53,071
again with the original content of 70
140

708
00:43:53,071 --> 00:43:56,950
432 and this time I propose

709
00:43:57,589 --> 00:44:01,060
I had give a new content of 700

710
00:44:01,006 --> 00:44:04,054
and notice Bush everything slides down

711
00:44:04,054 --> 00:44:07,142
and I can see my content at the correct
position

712
00:44:08,042 --> 00:44:13,074
I'm still not happy because my content
shouldn't be moving

713
00:44:13,074 --> 00:44:16,443
if you've seen sample app what you've
seen iTunes Connect

714
00:44:17,109 --> 00:44:21,450
what we've seen Game Center you actually
know that I wanted my content

715
00:44:21,045 --> 00:44:26,051
not just to come in I want my content to
slide in from the side

716
00:44:27,005 --> 00:44:30,040
because frankly that's cool and

717
00:44:30,004 --> 00:44:34,093
if I get content that slides out from
the top and slide in from the side

718
00:44:35,029 --> 00:44:39,116
I use as you can get seasick heineman
American one-star reviews for that

719
00:44:40,016 --> 00:44:43,205
soul the solution

720
00:44:43,349 --> 00:44:48,230
is initial and final layout accurate
that function I tried to do first

721
00:44:48,023 --> 00:44:52,652
is the final 1i need to implement and
just a reminder

722
00:44:52,859 --> 00:44:56,810
initially attack tributes is called if
the view will be on the screen after the

723
00:44:56,081 --> 00:44:57,082
update

724
00:44:57,091 --> 00:45:01,147
finally on attributes is called if the
view was on the screen before the update

725
00:45:02,047 --> 00:45:06,064
and they're both gonna be called for
view that remains on screen

726
00:45:06,064 --> 00:45:10,133
and I know you're not gonna believe this
until you see the code

727
00:45:11,033 --> 00:45:16,067
but actually really simple once the all
the information has been processed

728
00:45:16,067 --> 00:45:20,133
cell let's look at your admissions
before I like to see the code

729
00:45:21,033 --> 00:45:25,096
on the left here we see what's happening
to the viewport

730
00:45:25,096 --> 00:45:28,099
on the right is what the user actually
sees

731
00:45:29,026 --> 00:45:32,123
K without initial attributes the blue
content

732
00:45:33,023 --> 00:45:36,088
is stock where really is

733
00:45:36,088 --> 00:45:39,156
and the viewport slides up to meet

734
00:45:40,056 --> 00:45:44,129
and that makes that unwanted animation

735
00:45:45,029 --> 00:45:48,052
however after I've

736
00:45:48,052 --> 00:45:51,391
implemented initial layout attributes
you'll notice

737
00:45:51,859 --> 00:45:56,210
that the new content is synced up with
the viewport

738
00:45:56,021 --> 00:45:59,670
and as the viewport transitions to its
new location

739
00:45:59,859 --> 00:46:04,220
the new content and meets with it and
appears

740
00:46:04,022 --> 00:46:07,030
to stand still now

741
00:46:07,003 --> 00:46:10,792
everything's moving but nothing appears
like it's moving

742
00:46:11,089 --> 00:46:15,550
and that's what's important cell let's
take a look at the actual code I promise

743
00:46:15,055 --> 00:46:15,101
you

744
00:46:16,001 --> 00:46:19,056
it's actually really some cell

745
00:46:19,056 --> 00:46:24,060
this is the for staff we start off by
getting section

746
00:46:24,096 --> 00:46:27,100
then we get a copy the layout actually
it's

747
00:46:28,000 --> 00:46:31,339
and obviously need to copy because we
can modify them possibly

748
00:46:31,339 --> 00:46:34,690
and we don't modify the real attributes
because then will be able to find the

749
00:46:34,069 --> 00:46:35,082
real attributes

750
00:46:35,082 --> 00:46:38,151
and then ourselves will be hard I'm

751
00:46:39,051 --> 00:46:42,145
so then we just termine whether or not
this particular item was inserted

752
00:46:43,045 --> 00:46:46,684
or reloaded remember I said we did we
did all this calculation

753
00:46:47,089 --> 00:46:51,270
you prepare for collection you updates
and now that means we've only got

754
00:46:51,027 --> 00:46:54,034
these two lines of code

755
00:46:54,097 --> 00:46:58,100
then it was inserted would change the
Alpha

756
00:46:59,000 --> 00:47:04,033
to be 0 so it's gonna paid in

757
00:47:04,033 --> 00:47:07,054
if it was reloaded and didn't exist

758
00:47:07,054 --> 00:47:11,129
in the old layout remember IQ created a
snapshot of the old layout

759
00:47:12,029 --> 00:47:15,098
so if there is no item at that index
bout

760
00:47:15,359 --> 00:47:18,650
in the old lamp when it was reloaded we
want

761
00:47:18,065 --> 00:47:22,083
Badian it's perfectly OK if there was an
item there

762
00:47:22,083 --> 00:47:27,092
the previous time that's just gonna
change I'm okay with that

763
00:47:27,839 --> 00:47:30,916
and then finally we want to offset the
origin

764
00:47:31,609 --> 00:47:34,650
up the item by the Delta up to

765
00:47:34,065 --> 00:47:38,088
content offset and that way everything's
gonna stay

766
00:47:38,088 --> 00:47:42,093
exactly in place

767
00:47:42,093 --> 00:47:46,096
so to recap bookkeeping is critical

768
00:47:46,096 --> 00:47:49,495
to making your layout work if you don't
have the information you need

769
00:47:50,359 --> 00:47:53,930
is no way you can make these methods
work

770
00:47:53,093 --> 00:47:57,102
and then the optional methods really
make a huge difference

771
00:47:58,002 --> 00:48:01,093
there's a difference between a L a layup
that technically works

772
00:48:01,093 --> 00:48:04,182
and a layup it's just great so

773
00:48:05,082 --> 00:48:09,591
middle for requirements think we did a
pretty good job at that

774
00:48:10,329 --> 00:48:14,220
the last three I fought we're just gonna
be

775
00:48:14,022 --> 00:48:18,151
you know a little something extra that
we'd add to the application

776
00:48:18,349 --> 00:48:22,970
and they changed from being a little
something actually started

777
00:48:22,097 --> 00:48:27,121
take a little but I'm arm so let's take
a look at them

778
00:48:28,021 --> 00:48:31,119
in order to add swiped at it obviously
we need actions

779
00:48:32,019 --> 00:48:36,046
to ourselves and there's any number ways
we could about actions

780
00:48:36,046 --> 00:48:39,945
but in this case we had them directly to
the cells

781
00:48:40,359 --> 00:48:43,640
and here we are because we use this as
an example

782
00:48:43,064 --> 00:48:46,105
we're adding to actions to a cell

783
00:48:47,005 --> 00:48:50,057
make favorite and swipe to delete cell

784
00:48:50,057 --> 00:48:53,091
you can see that each action has a title
and

785
00:48:53,091 --> 00:48:56,106
a selector those selectors when they get

786
00:48:57,006 --> 00:49:01,010
when the action is invoked bubble up the
responder chain

787
00:49:01,046 --> 00:49:04,054
and our view controller catches them

788
00:49:04,054 --> 00:49:08,100
now force white editing batch editing in
and the whole nine yards

789
00:49:09,000 --> 00:49:12,032
we needed some additional custom
attributes

790
00:49:12,032 --> 00:49:15,061
we needed the column index

791
00:49:15,349 --> 00:49:19,351
editing state and whether or not cell
was movable

792
00:49:19,369 --> 00:49:23,890
I think those will become apparent why
we needed them in just a moment

793
00:49:23,089 --> 00:49:27,098
cell slight edit with one column this
works exactly as you would expect

794
00:49:28,079 --> 00:49:31,145
right spiked over you get the two
buttons

795
00:49:32,045 --> 00:49:35,100
tap on a button action goes up the
responder chain

796
00:49:36,000 --> 00:49:41,003
you controller catches it array all's
good

797
00:49:41,003 --> 00:49:45,021
now in the case that the Delete action
that's all handled by the base view

798
00:49:45,048 --> 00:49:46,146
controller

799
00:49:47,046 --> 00:49:51,050
for two columns it's a little bit more
complicated

800
00:49:51,005 --> 00:49:55,604
because just like Game Center we wanted
it to appear

801
00:49:56,099 --> 00:50:00,500
that are cell was sliding underneath

802
00:50:00,005 --> 00:50:03,084
the other content and in order to do
that

803
00:50:04,029 --> 00:50:07,055
we needed to have the column index

804
00:50:07,055 --> 00:50:12,094
as an attribute on the cell so when the
column index is not zero

805
00:50:12,589 --> 00:50:16,310
we display a little gradient and
therefore everything looks like it's

806
00:50:16,031 --> 00:50:18,076
like underneath

807
00:50:18,076 --> 00:50:21,147
so for batch editing we have an
attribute for

808
00:50:22,047 --> 00:50:25,176
weather setting and when that changes to
know

809
00:50:25,599 --> 00:50:28,599
we animate out our editing controls and

810
00:50:28,599 --> 00:50:32,520
movable is yes then we also display the
gripper

811
00:50:32,052 --> 00:50:35,066
and movable is actually determined based
on

812
00:50:35,066 --> 00:50:40,123
a query to your datasource or Rd source
really

813
00:50:41,023 --> 00:50:44,652
and as you would expect you tap on the
twisty thing and outcome the editing

814
00:50:44,859 --> 00:50:46,910
controls

815
00:50:47,369 --> 00:50:50,417
and because I am much addicted

816
00:50:50,849 --> 00:50:54,260
to state machines it is

817
00:50:54,026 --> 00:50:57,855
all controlled by another state she arm

818
00:50:58,089 --> 00:51:01,750
this manages all over gesture
recognizers the UI pen just a recognizer

819
00:51:01,075 --> 00:51:07,151
the UI long press just recognizer and
the states were somewhat complex

820
00:51:08,051 --> 00:51:11,660
the diagram gives you an indication the
reason for that is that

821
00:51:12,119 --> 00:51:15,950
we have to respond to external stimulus
so for example if you have a toolbar

822
00:51:15,095 --> 00:51:15,148
that has a

823
00:51:16,048 --> 00:51:19,051
edit Anna done button the toggles

824
00:51:19,078 --> 00:51:23,637
if you're editing and the user taps done
at any given moment we have to shut it

825
00:51:24,339 --> 00:51:25,230
all down

826
00:51:25,023 --> 00:51:28,082
and transition back into than idle state

827
00:51:28,082 --> 00:51:33,091
and so that means that things are a bit
more complex

828
00:51:33,091 --> 00:51:36,095
I'd love to revisit this and see if i
cant

829
00:51:37,031 --> 00:51:40,340
you know simple fire but works

830
00:51:40,619 --> 00:51:44,190
and that's you know the key criteria

831
00:51:44,019 --> 00:51:47,055
it only works with our layout in our
cells

832
00:51:47,055 --> 00:51:51,101
I I tried at some length to generalize
it a little bit more

833
00:51:52,001 --> 00:51:55,005
by it works

834
00:51:55,005 --> 00:51:58,824
and that's a great feature so drag to
reorder

835
00:51:58,869 --> 00:52:03,720
it required some layout changes in order
to make everything work correctly

836
00:52:03,072 --> 00:52:06,072
weaves add a layout gap

837
00:52:06,072 --> 00:52:09,088
so as you're dragging this cell around

838
00:52:09,088 --> 00:52:13,173
we needed the split apart the existing
cells

839
00:52:14,073 --> 00:52:17,130
and we also needed to take the cell that
you were dragging

840
00:52:18,003 --> 00:52:21,062
and market is hidden and

841
00:52:21,359 --> 00:52:24,690
we also need to make sure that our layup
calculation

842
00:52:24,069 --> 00:52:27,069
was fast enough I'm not gonna pretend
that it's

843
00:52:27,069 --> 00:52:31,113
as fast as gonna get because I'm not
done yet

844
00:52:32,013 --> 00:52:36,074
but it was fast enough it feels
reasonably fluid

845
00:52:36,074 --> 00:52:39,171
it's good enough for the first release

846
00:52:40,071 --> 00:52:43,164
now it does require data source apart so
by default

847
00:52:44,064 --> 00:52:47,089
the datasource normally answers nope
can't move that one

848
00:52:47,089 --> 00:52:50,130
nope can edit that so on so forth so

849
00:52:51,003 --> 00:52:54,102
in order to actually implement drag
reordering in your code

850
00:52:55,029 --> 00:52:58,032
you're gonna wanna say oh yes you can
move those things you can drag those

851
00:52:58,032 --> 00:52:58,117
things

852
00:52:59,017 --> 00:53:02,106
on and so there are some methods on the
data source that

853
00:53:03,006 --> 00:53:06,018
need to have the right responses

854
00:53:06,018 --> 00:53:09,091
but he really was and incremental change
Doral Ale

855
00:53:09,091 --> 00:53:13,098
and incremental change your data sources

856
00:53:13,098 --> 00:53:16,115
its cell that's the last three

857
00:53:17,015 --> 00:53:20,069
requirements and

858
00:53:20,069 --> 00:53:23,130
they were a little bit of a challenge
but they were just

859
00:53:24,003 --> 00:53:28,037
you know a little bit extra so in
summary

860
00:53:28,064 --> 00:53:31,132
the aggregate data sources went a long
way to simplifying

861
00:53:32,032 --> 00:53:35,123
are complex designs when I first saw the
designs that a try

862
00:53:36,023 --> 00:53:39,082
gave us I was a little bit terrified

863
00:53:39,082 --> 00:53:42,123
there's a lot there we had a very short
time

864
00:53:43,023 --> 00:53:46,071
and I'm glad that we found a way to make
it

865
00:53:46,071 --> 00:53:50,122
easier and for you I collection view

866
00:53:51,022 --> 00:53:54,040
bookkeeping bookkeeping bookkeeping keep
all

867
00:53:54,004 --> 00:53:57,093
the data don't let it out your site

868
00:53:58,029 --> 00:54:02,108
at the very end when you're concerned
that you using too much memory

869
00:54:02,369 --> 00:54:07,680
fire instruments let instruments tell
you if you using too much memory

870
00:54:07,068 --> 00:54:10,100
and then finally swiped at a track
reordering they're just incremental

871
00:54:11,000 --> 00:54:12,002
things

872
00:54:12,002 --> 00:54:17,071
you can do it and their simple kept

873
00:54:17,089 --> 00:54:21,140
pull up pull it outta there and make a
party on so

874
00:54:21,014 --> 00:54:25,041
for more information talk to the
incomparable J parents

875
00:54:25,041 --> 00:54:28,065
I'm told he has great shoes

876
00:54:28,065 --> 00:54:33,067
documentation take a look at the I was
documentation online

877
00:54:33,067 --> 00:54:36,150
and the DEP forms there's great material
there

878
00:54:37,005 --> 00:54:40,036
we've been known to hang out there as
well there were

879
00:54:40,081 --> 00:54:43,170
related sessions this morning I'm sure
they'll be online this evening

880
00:54:44,007 --> 00:54:47,014
so thank you so much for coming I hope
you enjoyed

881
00:54:48,004 --> 00:54:48,030
the sea

